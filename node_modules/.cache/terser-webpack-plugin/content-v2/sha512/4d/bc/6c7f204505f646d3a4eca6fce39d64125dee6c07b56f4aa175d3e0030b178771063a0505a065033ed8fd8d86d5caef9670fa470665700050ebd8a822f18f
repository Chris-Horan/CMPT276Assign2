{"code":"!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=11)}([function(e){function t(){throw new Error(\"setTimeout has not been defined\")}function n(){throw new Error(\"clearTimeout has not been defined\")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(){p&&l&&(p=!1,l.length?h=l.concat(h):d=-1,h.length&&o())}function o(){if(!p){var e=r(i);p=!0;for(var t=h.length;t;){for(l=h,h=[];++d<t;)l&&l[d].run();d=-1,t=h.length}l=null,p=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function u(){}var c,s,f=e.exports={};!function(){try{c=\"function\"==typeof setTimeout?setTimeout:t}catch(e){c=t}try{s=\"function\"==typeof clearTimeout?clearTimeout:n}catch(e){s=n}}();var l,h=[],p=!1,d=-1;f.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new a(e,t)),1!==h.length||p||r(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title=\"browser\",f.browser=!0,f.env={},f.argv=[],f.version=\"\",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(){return[]},f.binding=function(){throw new Error(\"process.binding is not supported\")},f.cwd=function(){return\"/\"},f.chdir=function(){throw new Error(\"process.chdir is not supported\")},f.umask=function(){return 0}},function(e,t){var n=Math.max;(function(){var r=this,i=r._,o={},a=Array.prototype,u=Object.prototype,c=Function.prototype,s=a.push,f=a.slice,l=a.concat,h=u.toString,p=u.hasOwnProperty,d=a.forEach,y=a.map,v=a.reduce,g=a.reduceRight,m=a.filter,b=a.every,w=a.some,_=a.indexOf,k=a.lastIndexOf,x=Array.isArray,E=Object.keys,A=c.bind,I=function(e){return e instanceof I?e:this instanceof I?void(this._wrapped=e):new I(e)};e.exports&&(t=e.exports=I),t._=I,I.VERSION=\"1.4.4\";var O=I.each=I.forEach=function(e,t,n){if(null!=e)if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===o)return}else for(var a in e)if(I.has(e,a)&&t.call(n,e[a],a,e)===o)return};I.map=I.collect=function(e,t,n){var r=[];return null==e?r:y&&e.map===y?e.map(t,n):(O(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),r)};var j=\"Reduce of empty array with no initial value\";I.reduce=I.foldl=I.inject=function(e,t,n,r){var i=2<arguments.length;if(null==e&&(e=[]),v&&e.reduce===v)return r&&(t=I.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(O(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(j);return n},I.reduceRight=I.foldr=function(e,t,n,r){var i=2<arguments.length;if(null==e&&(e=[]),g&&e.reduceRight===g)return r&&(t=I.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=I.keys(e);o=a.length}if(O(e,function(u,c,s){c=a?a[--o]:--o,i?n=t.call(r,n,e[c],c,s):(n=e[c],i=!0)}),!i)throw new TypeError(j);return n},I.find=I.detect=function(e,t,n){var r;return S(e,function(e,i,o){if(t.call(n,e,i,o))return r=e,!0}),r},I.filter=I.select=function(e,t,n){var r=[];return null==e?r:m&&e.filter===m?e.filter(t,n):(O(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},I.reject=function(e,t,n){return I.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},I.every=I.all=function(e,t,n){t||(t=I.identity);var r=!0;return null==e?r:b&&e.every===b?e.every(t,n):(O(e,function(e,i,a){if(!(r=r&&t.call(n,e,i,a)))return o}),!!r)};var S=I.some=I.any=function(e,t,n){t||(t=I.identity);var r=!1;return null==e?r:w&&e.some===w?e.some(t,n):(O(e,function(e,i,a){if(r||(r=t.call(n,e,i,a)))return o}),!!r)};I.contains=I.include=function(e,t){return null!=e&&(_&&e.indexOf===_?-1!=e.indexOf(t):S(e,function(e){return e===t}))},I.invoke=function(e,t){var n=f.call(arguments,2),r=I.isFunction(t);return I.map(e,function(e){return(r?t:e[t]).apply(e,n)})},I.pluck=function(e,t){return I.map(e,function(e){return e[t]})},I.where=function(e,t,n){return I.isEmpty(t)?n?null:[]:I[n?\"find\":\"filter\"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},I.findWhere=function(e,t){return I.where(e,t,!0)},I.max=function(e,t,r){if(!t&&I.isArray(e)&&e[0]===+e[0]&&65535>e.length)return n.apply(Math,e);if(!t&&I.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return O(e,function(e,n,o){var a=t?t.call(r,e,n,o):e;a>=i.computed&&(i={value:e,computed:a})}),i.value},I.min=function(e,t,n){if(!t&&I.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&I.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return O(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a<r.computed&&(r={value:e,computed:a})}),r.value},I.shuffle=function(e){var t,n=0,r=[];return O(e,function(e){t=I.random(n++),r[n-1]=r[t],r[t]=e}),r};var D=function(e){return I.isFunction(e)?e:function(t){return t[e]}};I.sortBy=function(e,t,n){var r=D(t);return I.pluck(I.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index<t.index?-1:1}),\"value\")};var $=function(e,t,n,r){var i={},o=D(t||I.identity);return O(e,function(t,a){var u=o.call(n,t,a,e);r(i,u,t)}),i};I.groupBy=function(e,t,n){return $(e,t,n,function(e,t,n){(I.has(e,t)?e[t]:e[t]=[]).push(n)})},I.countBy=function(e,t,n){return $(e,t,n,function(e,t){I.has(e,t)||(e[t]=0),e[t]++})},I.sortedIndex=function(e,t,n,r){for(var i=(n=null==n?I.identity:D(n)).call(r,t),o=0,a=e.length;o<a;){var u=o+a>>>1;n.call(r,e[u])<i?o=u+1:a=u}return o},I.toArray=function(e){return e?I.isArray(e)?f.call(e):e.length===+e.length?I.map(e,I.identity):I.values(e):[]},I.size=function(e){return null==e?0:e.length===+e.length?e.length:I.keys(e).length},I.first=I.head=I.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:f.call(e,0,t)},I.initial=function(e,t,n){return f.call(e,0,e.length-(null==t||n?1:t))},I.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:f.call(e,n(e.length-t,0))},I.rest=I.tail=I.drop=function(e,t,n){return f.call(e,null==t||n?1:t)},I.compact=function(e){return I.filter(e,I.identity)};var N=function(e,t,n){return O(e,function(e){I.isArray(e)?t?s.apply(n,e):N(e,t,n):n.push(e)}),n};I.flatten=function(e,t){return N(e,t,[])},I.without=function(e){return I.difference(e,f.call(arguments,1))},I.uniq=I.unique=function(e,t,n,r){I.isFunction(t)&&(r=n,n=t,t=!1);var i=n?I.map(e,n,r):e,o=[],a=[];return O(i,function(n,r){(t?!r||a[a.length-1]!==n:!I.contains(a,n))&&(a.push(n),o.push(e[r]))}),o},I.union=function(){return I.uniq(l.apply(a,arguments))},I.intersection=function(e){var t=f.call(arguments,1);return I.filter(I.uniq(e),function(e){return I.every(t,function(t){return 0<=I.indexOf(t,e)})})},I.difference=function(e){var t=l.apply(a,f.call(arguments,1));return I.filter(e,function(e){return!I.contains(t,e)})},I.zip=function(){for(var e=f.call(arguments),t=I.max(I.pluck(e,\"length\")),n=Array(t),r=0;r<t;r++)n[r]=I.pluck(e,\"\"+r);return n},I.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},I.indexOf=function(e,t,r){if(null==e)return-1;var i=0,o=e.length;if(r){if(\"number\"!=typeof r)return e[i=I.sortedIndex(e,t)]===t?i:-1;i=0>r?n(0,o+r):r}if(_&&e.indexOf===_)return e.indexOf(t,r);for(;i<o;i++)if(e[i]===t)return i;return-1},I.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(k&&e.lastIndexOf===k)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},I.range=function(e,t,r){1>=arguments.length&&(t=e||0,e=0),r=arguments[2]||1;for(var i=n(Math.ceil((t-e)/r),0),o=0,a=Array(i);o<i;)a[o++]=e,e+=r;return a},I.bind=function(e,t){if(e.bind===A&&A)return A.apply(e,f.call(arguments,1));var n=f.call(arguments,2);return function(){return e.apply(t,n.concat(f.call(arguments)))}},I.partial=function(e){var t=f.call(arguments,1);return function(){return e.apply(this,t.concat(f.call(arguments)))}},I.bindAll=function(e){var t=f.call(arguments,1);return 0===t.length&&(t=I.functions(e)),O(t,function(t){e[t]=I.bind(e[t],e)}),e},I.memoize=function(e,t){var n={};return t||(t=I.identity),function(){var r=t.apply(this,arguments);return I.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},I.delay=function(e,t){var n=f.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},I.defer=function(e){return I.delay.apply(I,[e,1].concat(f.call(arguments,1)))},I.throttle=function(e,t){var n,r,i,o,a=0,u=function(){a=new Date,i=null,o=e.apply(n,r)};return function(){var c=new Date,s=t-(c-a);return n=this,r=arguments,0>=s?(clearTimeout(i),i=null,a=c,o=e.apply(n,r)):!i&&(i=setTimeout(u,s)),o}},I.debounce=function(e,t,n){var r,i;return function(){var o=this,a=arguments,u=n&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,n||(i=e.apply(o,a))},t),u&&(i=e.apply(o,a)),i}},I.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},I.wrap=function(e,t){return function(){var n=[e];return s.apply(n,arguments),t.apply(this,n)}},I.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;0<=n;n--)t=[e[n].apply(this,t)];return t[0]}},I.after=function(e,t){return 0>=e?t():function(){if(1>--e)return t.apply(this,arguments)}},I.keys=E||function(e){if(e!==Object(e))throw new TypeError(\"Invalid object\");var t=[];for(var n in e)I.has(e,n)&&(t[t.length]=n);return t},I.values=function(e){var t=[];for(var n in e)I.has(e,n)&&t.push(e[n]);return t},I.pairs=function(e){var t=[];for(var n in e)I.has(e,n)&&t.push([n,e[n]]);return t},I.invert=function(e){var t={};for(var n in e)I.has(e,n)&&(t[e[n]]=n);return t},I.functions=I.methods=function(e){var t=[];for(var n in e)I.isFunction(e[n])&&t.push(n);return t.sort()},I.extend=function(e){return O(f.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},I.pick=function(e){var t={},n=l.apply(a,f.call(arguments,1));return O(n,function(n){n in e&&(t[n]=e[n])}),t},I.omit=function(e){var t={},n=l.apply(a,f.call(arguments,1));for(var r in e)I.contains(n,r)||(t[r]=e[r]);return t},I.defaults=function(e){return O(f.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},I.clone=function(e){return I.isObject(e)?I.isArray(e)?e.slice():I.extend({},e):e},I.tap=function(e,t){return t(e),e};var T=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof I&&(e=e._wrapped),t instanceof I&&(t=t._wrapped);var i=h.call(e);if(i!=h.call(t))return!1;switch(i){case\"[object String]\":return e==t+\"\";case\"[object Number]\":return e==+e?0==e?1/e==1/t:e==+t:t!=+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t;case\"[object RegExp]\":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(\"object\"!=typeof e||\"object\"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;n.push(e),r.push(t);var a=0,u=!0;if(\"[object Array]\"!=i){var c=e.constructor,s=t.constructor;if(c!==s&&!(I.isFunction(c)&&c instanceof c&&I.isFunction(s)&&s instanceof s))return!1;for(var f in e)if(I.has(e,f)&&(a++,!(u=I.has(t,f)&&T(e[f],t[f],n,r))))break;if(u){for(f in t)if(I.has(t,f)&&!a--)break;u=!a}}else if(u=(a=e.length)==t.length)for(;a--&&(u=T(e[a],t[a],n,r)););return n.pop(),r.pop(),u};I.isEqual=function(e,t){return T(e,t,[],[])},I.isEmpty=function(e){if(null==e)return!0;if(I.isArray(e)||I.isString(e))return 0===e.length;for(var t in e)if(I.has(e,t))return!1;return!0},I.isElement=function(e){return!(!e||1!==e.nodeType)},I.isArray=x||function(e){return\"[object Array]\"==h.call(e)},I.isObject=function(e){return e===Object(e)},O([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\"],function(e){I[\"is\"+e]=function(t){return h.call(t)==\"[object \"+e+\"]\"}}),I.isArguments(arguments)||(I.isArguments=function(e){return!(!e||!I.has(e,\"callee\"))}),I.isFunction=function(e){return\"function\"==typeof e},I.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},I.isNaN=function(e){return I.isNumber(e)&&e!=+e},I.isBoolean=function(e){return!0===e||!1===e||\"[object Boolean]\"==h.call(e)},I.isNull=function(e){return null===e},I.isUndefined=function(e){return void 0===e},I.has=function(e,t){return p.call(e,t)},I.noConflict=function(){return r._=i,this},I.identity=function(e){return e},I.times=function(e,t,n){for(var r=Array(e),i=0;i<e;i++)r[i]=t.call(n,i);return r},I.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var C={escape:{\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"/\":\"&#x2F;\"}};C.unescape=I.invert(C.escape);var M={escape:new RegExp(\"[\"+I.keys(C.escape).join(\"\")+\"]\",\"g\"),unescape:new RegExp(\"(\"+I.keys(C.unescape).join(\"|\")+\")\",\"g\")};I.each([\"escape\",\"unescape\"],function(e){I[e]=function(t){return null==t?\"\":(\"\"+t).replace(M[e],function(t){return C[e][t]})}}),I.result=function(e,t){if(null==e)return null;var n=e[t];return I.isFunction(n)?n.call(e):n},I.mixin=function(e){O(I.functions(e),function(t){var n=I[t]=e[t];I.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),L.call(this,n.apply(I,e))}})};var F=0;I.uniqueId=function(e){var t=++F+\"\";return e?e+t:t},I.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var R=/(.)^/,P={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\t\":\"t\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},z=/\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;I.template=function(e,t,n){var r;n=I.defaults({},n,I.templateSettings);var i=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join(\"|\")+\"|$\",\"g\"),o=0,a=\"__p+='\";e.replace(i,function(t,n,r,i,u){return a+=e.slice(o,u).replace(z,function(e){return\"\\\\\"+P[e]}),n&&(a+=\"'+\\n((__t=(\"+n+\"))==null?'':_.escape(__t))+\\n'\"),r&&(a+=\"'+\\n((__t=(\"+r+\"))==null?'':__t)+\\n'\"),i&&(a+=\"';\\n\"+i+\"\\n__p+='\"),o=u+t.length,t}),a+=\"';\\n\",n.variable||(a=\"with(obj||{}){\\n\"+a+\"}\\n\"),a=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+a+\"return __p;\\n\";try{r=new Function(n.variable||\"obj\",\"_\",a)}catch(t){throw t.source=a,t}if(t)return r(t,I);var u=function(e){return r.call(this,e,I)};return u.source=\"function(\"+(n.variable||\"obj\")+\"){\\n\"+a+\"}\",u},I.chain=function(e){return I(e).chain()};var L=function(e){return this._chain?I(e).chain():e};I.mixin(I),O([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(e){var t=a[e];I.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(\"shift\"==e||\"splice\"==e)&&0===n.length&&delete n[0],L.call(this,n)}}),O([\"concat\",\"join\",\"slice\"],function(e){var t=a[e];I.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),I.extend(I.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},function(e,t,n){function r(e,t){if(\"number\"==typeof e&&(e=e.toString()),!(\"$\"!==e[0]||\"$$date\"===e&&\"number\"==typeof t||\"$$deleted\"===e&&!0===t||\"$$indexCreated\"===e||\"$$indexRemoved\"===e))throw new Error(\"Field names cannot begin with the $ character\");if(-1!==e.indexOf(\".\"))throw new Error(\"Field names cannot contain a .\")}function i(e){v.isArray(e)&&e.forEach(function(e){i(e)}),\"object\"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){r(t,e[t]),i(e[t])})}function o(e,t){var n;return\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||null===e||v.isDate(e)?e:v.isArray(e)?(n=[],e.forEach(function(e){n.push(o(e,t))}),n):\"object\"==typeof e?(n={},Object.keys(e).forEach(function(r){t&&(\"$\"===r[0]||-1!==r.indexOf(\".\"))||(n[r]=o(e[r],t))}),n):void 0}function a(e){return\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||null===e||v.isDate(e)||v.isArray(e)}function u(e,t){return e<t?-1:e>t?1:0}function c(e,t){var n,r;for(n=0;n<y(e.length,t.length);n+=1)if(0!==(r=s(e[n],t[n])))return r;return u(e.length,t.length)}function s(e,t,n){var r,i,o,a,f=n||u;if(void 0===e)return void 0===t?0:-1;if(void 0===t)return void 0===e?0:1;if(null===e)return null===t?0:-1;if(null===t)return null===e?0:1;if(\"number\"==typeof e)return\"number\"==typeof t?u(e,t):-1;if(\"number\"==typeof t)return\"number\"==typeof e?u(e,t):1;if(\"string\"==typeof e)return\"string\"==typeof t?f(e,t):-1;if(\"string\"==typeof t)return\"string\"==typeof e?f(e,t):1;if(\"boolean\"==typeof e)return\"boolean\"==typeof t?u(e,t):-1;if(\"boolean\"==typeof t)return\"boolean\"==typeof e?u(e,t):1;if(v.isDate(e))return v.isDate(t)?u(e.getTime(),t.getTime()):-1;if(v.isDate(t))return v.isDate(e)?u(e.getTime(),t.getTime()):1;if(v.isArray(e))return v.isArray(t)?c(e,t):-1;if(v.isArray(t))return v.isArray(e)?c(e,t):1;for(r=Object.keys(e).sort(),i=Object.keys(t).sort(),a=0;a<y(r.length,i.length);a+=1)if(0!==(o=s(e[r[a]],t[i[a]])))return o;return u(r.length,i.length)}function f(e,t){var n,r,i=\"string\"==typeof t?t.split(\".\"):t;if(e){if(0===i.length)return e;if(1===i.length)return e[i[0]];if(v.isArray(e[i[0]])){if(\"number\"==typeof(n=parseInt(i[1],10))&&!isNaN(n))return f(e[i[0]][n],i.slice(2));for(r=[],n=0;n<e[i[0]].length;n+=1)r.push(f(e[i[0]][n],i.slice(1)));return r}return f(e[i[0]],i.slice(1))}}function l(e,t){var n,r,i;if(null===e||\"string\"==typeof e||\"boolean\"==typeof e||\"number\"==typeof e||null===t||\"string\"==typeof t||\"boolean\"==typeof t||\"number\"==typeof t)return e===t;if(v.isDate(e)||v.isDate(t))return v.isDate(e)&&v.isDate(t)&&e.getTime()===t.getTime();if((!v.isArray(e)||!v.isArray(t))&&(v.isArray(e)||v.isArray(t))||void 0===e||void 0===t)return!1;try{n=Object.keys(e),r=Object.keys(t)}catch(t){return!1}if(n.length!==r.length)return!1;for(i=0;i<n.length;i+=1){if(-1===r.indexOf(n[i]))return!1;if(!l(e[n[i]],t[n[i]]))return!1}return!0}function h(e,t){return(\"string\"==typeof e||\"number\"==typeof e||v.isDate(e)||\"string\"==typeof t||\"number\"==typeof t||v.isDate(t))&&!(typeof e!=typeof t)}function p(e,t){var n,r,i,o;if(a(e)||a(t))return d({needAKey:e},\"needAKey\",t);for(n=Object.keys(t),o=0;o<n.length;o+=1)if(i=t[r=n[o]],\"$\"===r[0]){if(!_[r])throw new Error(\"Unknown logical operator \"+r);if(!_[r](e,i))return!1}else if(!d(e,r,i))return!1;return!0}function d(e,t,n,r){var i,o,a,u,c=f(e,t);if(v.isArray(c)&&!r){if(v.isArray(n))return d(e,t,n,!0);if(null!==n&&\"object\"==typeof n&&!v.isRegExp(n))for(o=Object.keys(n),i=0;i<o.length;i+=1)if(k[o[i]])return d(e,t,n,!0);for(i=0;i<c.length;i+=1)if(d({k:c[i]},\"k\",n))return!0;return!1}if(null!==n&&\"object\"==typeof n&&!v.isRegExp(n)&&!v.isArray(n)){if(o=Object.keys(n),a=g.map(o,function(e){return e[0]}),0!==(u=g.filter(a,function(e){return\"$\"===e})).length&&u.length!==a.length)throw new Error(\"You cannot mix operators and normal fields\");if(0<u.length){for(i=0;i<o.length;i+=1){if(!w[o[i]])throw new Error(\"Unknown comparison function \"+o[i]);if(!w[o[i]](c,n[o[i]]))return!1}return!0}}return v.isRegExp(n)?w.$regex(c,n):!!l(c,n)}var y=Math.min,v=n(3),g=n(1),m={},b={},w={},_={},k={};b.$set=function(e,t,n){e[t]=n},b.$unset=function(e,t){delete e[t]},b.$push=function(e,t,n){if(e.hasOwnProperty(t)||(e[t]=[]),!v.isArray(e[t]))throw new Error(\"Can't $push an element on non-array values\");if(null!==n&&\"object\"==typeof n&&n.$slice&&void 0===n.$each&&(n.$each=[]),null!==n&&\"object\"==typeof n&&n.$each){if(3<=Object.keys(n).length||2===Object.keys(n).length&&void 0===n.$slice)throw new Error(\"Can only use $slice in cunjunction with $each when $push to array\");if(!v.isArray(n.$each))throw new Error(\"$each requires an array value\");if(n.$each.forEach(function(n){e[t].push(n)}),void 0===n.$slice||\"number\"!=typeof n.$slice)return;if(0===n.$slice)e[t]=[];else{var r,i,o=e[t].length;0>n.$slice?(r=Math.max(0,o+n.$slice),i=o):0<n.$slice&&(r=0,i=y(o,n.$slice)),e[t]=e[t].slice(r,i)}}else e[t].push(n)},b.$addToSet=function(e,t,n){var r=!0;if(e.hasOwnProperty(t)||(e[t]=[]),!v.isArray(e[t]))throw new Error(\"Can't $addToSet an element on non-array values\");if(null!==n&&\"object\"==typeof n&&n.$each){if(1<Object.keys(n).length)throw new Error(\"Can't use another field in conjunction with $each\");if(!v.isArray(n.$each))throw new Error(\"$each requires an array value\");n.$each.forEach(function(n){b.$addToSet(e,t,n)})}else e[t].forEach(function(e){0===s(e,n)&&(r=!1)}),r&&e[t].push(n)},b.$pop=function(e,t,n){if(!v.isArray(e[t]))throw new Error(\"Can't $pop an element from non-array values\");if(\"number\"!=typeof n)throw new Error(n+\" isn't an integer, can't use it with $pop\");0===n||(e[t]=0<n?e[t].slice(0,e[t].length-1):e[t].slice(1))},b.$pull=function(e,t,n){var r,i;if(!v.isArray(e[t]))throw new Error(\"Can't $pull an element from non-array values\");for(i=(r=e[t]).length-1;0<=i;i-=1)p(r[i],n)&&r.splice(i,1)},b.$inc=function(e,t,n){if(\"number\"!=typeof n)throw new Error(n+\" must be a number\");if(\"number\"==typeof e[t])e[t]+=n;else{if(g.has(e,t))throw new Error(\"Don't use the $inc modifier on non-number fields\");e[t]=n}},b.$max=function(e,t,n){void 0===e[t]?e[t]=n:n>e[t]&&(e[t]=n)},b.$min=function(e,t,n){void 0===e[t]?e[t]=n:n<e[t]&&(e[t]=n)},Object.keys(b).forEach(function(e){m[e]=function(e){return function(t,n,r){var i=\"string\"==typeof n?n.split(\".\"):n;if(1===i.length)b[e](t,n,r);else{if(void 0===t[i[0]]){if(\"$unset\"===e)return;t[i[0]]={}}m[e](t[i[0]],i.slice(1),r)}}}(e)}),w.$lt=function(e,t){return h(e,t)&&e<t},w.$lte=function(e,t){return h(e,t)&&e<=t},w.$gt=function(e,t){return h(e,t)&&e>t},w.$gte=function(e,t){return h(e,t)&&e>=t},w.$ne=function(e,t){return!(void 0!==e&&l(e,t))},w.$in=function(e,t){var n;if(!v.isArray(t))throw new Error(\"$in operator called with a non-array\");for(n=0;n<t.length;n+=1)if(l(e,t[n]))return!0;return!1},w.$nin=function(e,t){if(!v.isArray(t))throw new Error(\"$nin operator called with a non-array\");return!w.$in(e,t)},w.$regex=function(e,t){if(!v.isRegExp(t))throw new Error(\"$regex operator called with non regular expression\");return\"string\"==typeof e&&t.test(e)},w.$exists=function(e,t){return t=t||\"\"===t,void 0===e?!t:t},w.$size=function(e,t){if(!v.isArray(e))return!1;if(0!=t%1)throw new Error(\"$size operator called without an integer\");return e.length==t},w.$elemMatch=function(e,t){if(!v.isArray(e))return!1;for(var n=e.length,r=!1;n--;)if(p(e[n],t)){r=!0;break}return r},k.$size=!0,k.$elemMatch=!0,_.$or=function(e,t){var n;if(!v.isArray(t))throw new Error(\"$or operator used without an array\");for(n=0;n<t.length;n+=1)if(p(e,t[n]))return!0;return!1},_.$and=function(e,t){var n;if(!v.isArray(t))throw new Error(\"$and operator used without an array\");for(n=0;n<t.length;n+=1)if(!p(e,t[n]))return!1;return!0},_.$not=function(e,t){return!p(e,t)},_.$where=function(e,t){var n;if(!g.isFunction(t))throw new Error(\"$where operator used without a function\");if(n=t.call(e),!g.isBoolean(n))throw new Error(\"$where function must return boolean\");return n},e.exports.serialize=function(e){return JSON.stringify(e,function(e,t){return r(e,t),void 0===t?void 0:null===t?null:\"function\"==typeof this[e].getTime?{$$date:this[e].getTime()}:t})},e.exports.deserialize=function(e){return JSON.parse(e,function(e,t){return\"$$date\"===e?new Date(t):\"string\"==typeof t||\"number\"==typeof t||\"boolean\"==typeof t||null===t?t:t&&t.$$date?t.$$date:t})},e.exports.deepCopy=o,e.exports.checkObject=i,e.exports.isPrimitiveType=a,e.exports.modify=function(e,t){var n,r,a=Object.keys(t),u=g.map(a,function(e){return e[0]}),c=g.filter(u,function(e){return\"$\"===e});if(-1!==a.indexOf(\"_id\")&&t._id!==e._id)throw new Error(\"You cannot change a document's _id\");if(0!==c.length&&c.length!==u.length)throw new Error(\"You cannot mix modifiers and normal fields\");if(0===c.length?(n=o(t))._id=e._id:(r=g.uniq(a),n=o(e),r.forEach(function(e){if(!m[e])throw new Error(\"Unknown modifier \"+e);if(\"object\"!=typeof t[e])throw new Error(\"Modifier \"+e+\"'s argument must be an object\");Object.keys(t[e]).forEach(function(r){m[e](n,r,t[e][r])})})),i(n),e._id!==n._id)throw new Error(\"You can't change a document's _id\");return n},e.exports.getDotValue=f,e.exports.match=p,e.exports.areThingsEqual=l,e.exports.compareThings=s},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:a};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?\"\u001b[\"+i.colors[n][0]+\"m\"+e+\"\u001b[\"+i.colors[n][1]+\"m\":e}function a(e){return e}function u(e,n,r){if(e.customInspect&&n&&_(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=u(e,i,r)),i}var o=c(e,n);if(o)return o;var a=Object.keys(n),h=function(e){var t={};return e.forEach(function(e){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(0<=a.indexOf(\"message\")||0<=a.indexOf(\"description\")))return s(n);if(0===a.length){if(_(n)){var p=n.name?\": \"+n.name:\"\";return e.stylize(\"[Function\"+p+\"]\",\"special\")}if(g(n))return e.stylize(RegExp.prototype.toString.call(n),\"regexp\");if(b(n))return e.stylize(Date.prototype.toString.call(n),\"date\");if(w(n))return s(n)}var d,v=\"\",m=!1,k=[\"{\",\"}\"];(l(n)&&(m=!0,k=[\"[\",\"]\"]),_(n))&&(v=\" [Function\"+(n.name?\": \"+n.name:\"\")+\"]\");return g(n)&&(v=\" \"+RegExp.prototype.toString.call(n)),b(n)&&(v=\" \"+Date.prototype.toUTCString.call(n)),w(n)&&(v=\" \"+s(n)),0!==a.length||m&&0!=n.length?0>r?g(n)?e.stylize(RegExp.prototype.toString.call(n),\"regexp\"):e.stylize(\"[Object]\",\"special\"):(e.seen.push(n),d=m?function(e,t,n,r,i){for(var o=[],a=0,u=t.length;a<u;++a)E(t,a+\"\")?o.push(f(e,t,n,r,a+\"\",!0)):o.push(\"\");return i.forEach(function(i){i.match(/^\\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}(e,n,r,h,a):a.map(function(t){return f(e,n,r,h,t,m)}),e.seen.pop(),function(e,t,n){return 60<e.reduce(function(e,t){return 0,0<=t.indexOf(\"\\n\")&&0,e+t.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1},0)?n[0]+(\"\"===t?\"\":t+\"\\n \")+\" \"+e.join(\",\\n  \")+\" \"+n[1]:n[0]+t+\" \"+e.join(\", \")+\" \"+n[1]}(d,v,k)):k[0]+v+k[1]}function c(e,t){if(v(t))return e.stylize(\"undefined\",\"undefined\");if(y(t)){var n=\"'\"+JSON.stringify(t).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return e.stylize(n,\"string\")}return d(t)?e.stylize(\"\"+t,\"number\"):h(t)?e.stylize(\"\"+t,\"boolean\"):p(t)?e.stylize(\"null\",\"null\"):void 0}function s(e){return\"[\"+Error.prototype.toString.call(e)+\"]\"}function f(e,t,n,r,i,o){var a,c,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?c=s.set?e.stylize(\"[Getter/Setter]\",\"special\"):e.stylize(\"[Getter]\",\"special\"):s.set&&(c=e.stylize(\"[Setter]\",\"special\")),E(r,i)||(a=\"[\"+i+\"]\"),c||(0>e.seen.indexOf(s.value)?-1<(c=p(n)?u(e,s.value,null):u(e,s.value,n-1)).indexOf(\"\\n\")&&(c=o?c.split(\"\\n\").map(function(e){return\"  \"+e}).join(\"\\n\").substr(2):\"\\n\"+c.split(\"\\n\").map(function(e){return\"   \"+e}).join(\"\\n\")):c=e.stylize(\"[Circular]\",\"special\")),v(a)){if(o&&i.match(/^\\d+$/))return c;(a=JSON.stringify(\"\"+i)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,\"name\")):(a=a.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),a=e.stylize(a,\"string\"))}return a+\": \"+c}function l(e){return Array.isArray(e)}function h(e){return\"boolean\"==typeof e}function p(e){return null===e}function d(e){return\"number\"==typeof e}function y(e){return\"string\"==typeof e}function v(e){return void 0===e}function g(e){return m(e)&&\"[object RegExp]\"===k(e)}function m(e){return\"object\"==typeof e&&null!==e}function b(e){return m(e)&&\"[object Date]\"===k(e)}function w(e){return m(e)&&(\"[object Error]\"===k(e)||e instanceof Error)}function _(e){return\"function\"==typeof e}function k(e){return Object.prototype.toString.call(e)}function x(e){return 10>e?\"0\"+e.toString(10):e.toString(10)}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var A=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(\" \")}n=1;for(var r=arguments,o=r.length,a=(e+\"\").replace(A,function(e){if(\"%%\"===e)return\"%\";if(n>=o)return e;switch(e){case\"%s\":return r[n++]+\"\";case\"%d\":return+r[n++];case\"%j\":try{return JSON.stringify(r[n++])}catch(e){return\"[Circular]\"}default:return e}}),u=r[n];n<o;u=r[++n])a+=p(u)||!m(u)?\" \"+u:\" \"+i(u);return a},t.deprecate=function(n,i){if(v(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var I,O={};t.debuglog=function(e){if(v(I)&&(I=r.env.NODE_DEBUG||\"\"),e=e.toUpperCase(),!O[e])if(new RegExp(\"\\\\b\"+e+\"\\\\b\",\"i\").test(I)){var n=r.pid;O[e]=function(){var r=t.format.apply(t,arguments);console.error(\"%s %d: %s\",e,n,r)}}else O[e]=function(){};return O[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},t.isArray=l,t.isBoolean=h,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=d,t.isString=y,t.isSymbol=function(e){return\"symbol\"==typeof e},t.isUndefined=v,t.isRegExp=g,t.isObject=m,t.isDate=b,t.isError=w,t.isFunction=_,t.isPrimitive=function(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"==typeof e||void 0===e},t.isBuffer=n(14);var j=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];t.log=function(){console.log(\"%s - %s\",function(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(\":\");return[e.getDate(),j[e.getMonth()],t].join(\" \")}(),t.format.apply(t,arguments))},t.inherits=n(15),t._extend=function(e,t){if(!t||!m(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(4),n(0))},function(e){var t=function(){return this}();try{t=t||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(t=window)}e.exports=t},function(e,t,n){(function(n,r){var i;!function(){function o(e){var t=!1;return function(){if(t)throw new Error(\"Callback was already called.\");t=!0,e.apply(a,arguments)}}var a,u,c={};null!=(a=this)&&(u=a.async),c.noConflict=function(){return a.async=u,c};var s=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},f=function(e,t){if(e.map)return e.map(t);var n=[];return s(e,function(e,r,i){n.push(t(e,r,i))}),n},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==n&&n.nextTick?(c.nextTick=n.nextTick,c.setImmediate=void 0===r?c.nextTick:function(e){r(e)}):\"function\"==typeof r?(c.nextTick=function(e){r(e)},c.setImmediate=c.nextTick):(c.nextTick=function(e){setTimeout(e,0)},c.setImmediate=c.nextTick),c.each=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;s(e,function(i){t(i,o(function(t){t?(n(t),n=function(){}):(r+=1)>=e.length&&n(null)}))})},c.forEach=c.each,c.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1)>=e.length?n(null):i()})};i()},c.forEachSeries=c.eachSeries,c.eachLimit=function(e,t,n,r){h(t).apply(null,[e,n,r])},c.forEachLimit=c.eachLimit;var h=function(e){return function(t,n,r){if(r=r||function(){},!t.length||0>=e)return r();var i=0,o=0,a=0;!function u(){if(i>=t.length)return r();for(;a<e&&o<t.length;)a+=1,n(t[(o+=1)-1],function(e){e?(r(e),r=function(){}):(a-=1,(i+=1)>=t.length?r():u())})}()}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[c.each].concat(t))}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[c.eachSeries].concat(t))}},y=function(e,t,n,r){var i=[];e(t=f(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})};c.map=p(y),c.mapSeries=d(y),c.mapLimit=function(e,t,n,r){return v(t)(e,n,r)};var v=function(e){return function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[h(e)].concat(n))}}(e,y)};c.reduce=function(e,t,n,r){c.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},c.inject=c.reduce,c.foldl=c.reduce,c.reduceRight=function(e,t,n,r){var i=f(e,function(e){return e}).reverse();c.reduce(i,t,n,r)},c.foldr=c.reduceRight;var g=function(e,t,n,r){var i=[];e(t=f(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(){r(f(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};c.filter=p(g),c.filterSeries=d(g),c.select=c.filter,c.selectSeries=c.filterSeries;var m=function(e,t,n,r){var i=[];e(t=f(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(){r(f(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};c.reject=p(m),c.rejectSeries=d(m);var b=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(){r()})};c.detect=p(b),c.detectSeries=d(b),c.some=function(e,t,n){c.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(){n(!1)})},c.any=c.some,c.every=function(e,t,n){c.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()})},function(){n(!0)})},c.all=c.every,c.sortBy=function(e,t,n){c.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,f(t.sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),function(e){return e.value}))})},c.auto=function(e,t){t=t||function(){};var n=l(e);if(!n.length)return t(null);var r={},i=[],o=function(e){i.unshift(e)},a=function(e){for(var t=0;t<i.length;t+=1)if(i[t]===e)return void i.splice(t,1)},u=function(){s(i.slice(0),function(e){e()})};o(function(){l(r).length===n.length&&(t(null,r),t=function(){})}),s(n,function(n){var i=e[n]instanceof Function?[e[n]]:e[n],f=function(e){var i=Array.prototype.slice.call(arguments,1);if(1>=i.length&&(i=i[0]),e){var o={};s(l(r),function(e){o[e]=r[e]}),o[n]=i,t(e,o),t=function(){}}else r[n]=i,c.setImmediate(u)},h=i.slice(0,Math.abs(i.length-1))||[],p=function(){return function(e,t,n){return e.reduce?e.reduce(t,n):(s(e,function(e,r,i){n=t(n,e,r,i)}),n)}(h,function(e,t){return e&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(n)};if(p())i[i.length-1](f,r);else{var d=function(){p()&&(a(d),i[i.length-1](f,r))};o(d)}})},c.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var n=new Error(\"First argument to waterfall must be an array of functions\");return t(n)}if(!e.length)return t();var r=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=e.next();o?i.push(r(o)):i.push(t),c.setImmediate(function(){e.apply(null,i)})}}};r(c.iterator(e))()};var w=function(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};c.parallel=function(e,t){w({map:c.map,each:c.each},e,t)},c.parallelLimit=function(e,t,n){w({map:v(t),each:h(t)},e,n)},c.series=function(e,t){if(t=t||function(){},e.constructor===Array)c.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};c.eachSeries(l(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),n[t]=i,r(e)})},function(e){t(e,n)})}},c.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},c.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var _=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};c.concat=p(_),c.concatSeries=d(_),c.whilst=function(e,t,n){e()?t(function(r){return r?n(r):void c.whilst(e,t,n)}):n()},c.doWhilst=function(e,t,n){e(function(r){return r?n(r):void(t()?c.doWhilst(e,t,n):n())})},c.until=function(e,t,n){e()?n():t(function(r){return r?n(r):void c.until(e,t,n)})},c.doUntil=function(e,t,n){e(function(r){return r?n(r):void(t()?n():c.doUntil(e,t,n))})},c.queue=function(e,t){function n(e,n,r,i){n.constructor!==Array&&(n=[n]),s(n,function(n){var o={data:n,callback:\"function\"==typeof i?i:null};r?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===t&&e.saturated(),c.setImmediate(e.process)})}void 0===t&&(t=1);var r=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,t){n(i,e,!1,t)},unshift:function(e,t){n(i,e,!0,t)},process:function(){if(r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var n=o(function(){r-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&0===i.tasks.length+r&&i.drain(),i.process()});e(t.data,n)}},length:function(){return i.tasks.length},running:function(){return r}};return i},c.cargo=function(e,t){var n=!1,r=[],i={tasks:r,payload:t,saturated:null,empty:null,drain:null,push:function(e,n){e.constructor!==Array&&(e=[e]),s(e,function(e){r.push({data:e,callback:\"function\"==typeof n?n:null}),i.saturated&&r.length===t&&i.saturated()}),c.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return void(i.drain&&i.drain());var a=\"number\"==typeof t?r.splice(0,t):r.splice(0),u=f(a,function(e){return e.data});i.empty&&i.empty(),n=!0,e(u,function(){n=!1;var e=arguments;s(a,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return r.length},running:function(){return n}};return i};var k=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);\"undefined\"!=typeof console&&(t?console.error&&console.error(t):console[e]&&s(n,function(t){console[e](t)}))}]))}};c.log=k(\"log\"),c.dir=k(\"dir\"),c.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in n?o.apply(null,n[a]):a in r?r[a].push(o):(r[a]=[o],e.apply(null,i.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},c.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},c.times=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return c.map(r,t,n)},c.timesSeries=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return c.mapSeries(r,t,n)},c.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();c.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}};var x=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};c.applyEach=p(x),c.applyEachSeries=d(x),c.forever=function(e,t){!function n(r){if(r){if(t)return t(r);throw r}e(n)}()},void 0===(i=function(){return c}.apply(t,[]))||(e.exports=i)}()}).call(this,n(0),n(7).setImmediate)},function(e){e.exports.uid=function(e){return function(e){function t(e){return o[63&e>>18]+o[63&e>>12]+o[63&e>>6]+o[63&e]}var n,r,i,o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",a=e.length%3,u=\"\";for(i=0,r=e.length-a;i<r;i+=3)u+=t(n=(e[i]<<16)+(e[i+1]<<8)+e[i+2]);return 1==a?(n=e[e.length-1],u+=o[n>>2],u+=o[63&n<<4],u+=\"==\"):2==a&&(n=(e[e.length-2]<<8)+e[e.length-1],u+=o[n>>10],u+=o[63&n>>4],u+=o[63&n<<2],u+=\"=\"),u}(function(e){for(var t,n=Array(e),r=0;r<e;r++)0==(3&r)&&(t=4294967296*Math.random()),n[r]=255&t>>>((3&r)<<3);return n}(Math.ceil(Math.max(8,2*e)))).replace(/[+\\/]/g,\"\").slice(0,e)}},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||\"undefined\"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(16),t.setImmediate=\"undefined\"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=\"undefined\"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(4))},function(e,t,n){function r(e,t){return e===t}function i(e){return null===e?\"$null\":\"string\"==typeof e?\"$string\"+e:\"boolean\"==typeof e?\"$boolean\"+e:\"number\"==typeof e?\"$number\"+e:s.isArray(e)?\"$date\"+e.getTime():e}function o(e){this.fieldName=e.fieldName,this.unique=e.unique||!1,this.sparse=e.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:u.compareThings,checkValueEquality:r},this.reset()}var a=n(18).AVLTree,u=n(2),c=n(1),s=n(3);o.prototype.reset=function(e){this.tree=new a(this.treeOptions),e&&this.insert(e)},o.prototype.insert=function(e){var t,n,r,o,a;if(s.isArray(e))this.insertMultipleDocs(e);else if(void 0!==(t=u.getDotValue(e,this.fieldName))||!this.sparse)if(s.isArray(t)){for(n=c.uniq(t,i),r=0;r<n.length;r+=1)try{this.tree.insert(n[r],e)}catch(t){a=t,o=r;break}if(a){for(r=0;r<o;r+=1)this.tree.delete(n[r],e);throw a}}else this.tree.insert(t,e)},o.prototype.insertMultipleDocs=function(e){var t,n,r;for(t=0;t<e.length;t+=1)try{this.insert(e[t])}catch(e){n=e,r=t;break}if(n){for(t=0;t<r;t+=1)this.remove(e[t]);throw n}},o.prototype.remove=function(e){var t,n=this;s.isArray(e)?e.forEach(function(e){n.remove(e)}):void 0===(t=u.getDotValue(e,this.fieldName))&&this.sparse||(s.isArray(t)?c.uniq(t,i).forEach(function(t){n.tree.delete(t,e)}):this.tree.delete(t,e))},o.prototype.update=function(e,t){if(s.isArray(e))this.updateMultipleDocs(e);else{this.remove(e);try{this.insert(t)}catch(t){throw this.insert(e),t}}},o.prototype.updateMultipleDocs=function(e){var t,n,r;for(t=0;t<e.length;t+=1)this.remove(e[t].oldDoc);for(t=0;t<e.length;t+=1)try{this.insert(e[t].newDoc)}catch(e){r=e,n=t;break}if(r){for(t=0;t<n;t+=1)this.remove(e[t].newDoc);for(t=0;t<e.length;t+=1)this.insert(e[t].oldDoc);throw r}},o.prototype.revertUpdate=function(e,t){var n=[];s.isArray(e)?(e.forEach(function(e){n.push({oldDoc:e.newDoc,newDoc:e.oldDoc})}),this.update(n)):this.update(t,e)},o.prototype.getMatching=function(e){var t=this;if(!s.isArray(e))return t.tree.search(e);var n={},r=[];return e.forEach(function(e){t.getMatching(e).forEach(function(e){n[e._id]=e})}),Object.keys(n).forEach(function(e){r.push(n[e])}),r},o.prototype.getBetweenBounds=function(e){return this.tree.betweenBounds(e)},o.prototype.getAll=function(){var e=[];return this.tree.executeOnEveryNode(function(t){var n;for(n=0;n<t.data.length;n+=1)e.push(t.data[n])}),e},e.exports=o},function(e,t,n){function r(e){e=e||{},this.left=null,this.right=null,this.parent=void 0===e.parent?null:e.parent,e.hasOwnProperty(\"key\")&&(this.key=e.key),this.data=e.hasOwnProperty(\"value\")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||o.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||o.defaultCheckValueEquality}function i(e,t){var n;for(n=0;n<t.length;n+=1)e.push(t[n])}var o=n(10);r.prototype.getMaxKeyDescendant=function(){return this.right?this.right.getMaxKeyDescendant():this},r.prototype.getMaxKey=function(){return this.getMaxKeyDescendant().key},r.prototype.getMinKeyDescendant=function(){return this.left?this.left.getMinKeyDescendant():this},r.prototype.getMinKey=function(){return this.getMinKeyDescendant().key},r.prototype.checkAllNodesFullfillCondition=function(e){this.hasOwnProperty(\"key\")&&(e(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(e),this.right&&this.right.checkAllNodesFullfillCondition(e))},r.prototype.checkNodeOrdering=function(){var e=this;this.hasOwnProperty(\"key\")&&(this.left&&(this.left.checkAllNodesFullfillCondition(function(t){if(0<=e.compareKeys(t,e.key))throw new Error(\"Tree with root \"+e.key+\" is not a binary search tree\")}),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition(function(t){if(0>=e.compareKeys(t,e.key))throw new Error(\"Tree with root \"+e.key+\" is not a binary search tree\")}),this.right.checkNodeOrdering()))},r.prototype.checkInternalPointers=function(){if(this.left){if(this.left.parent!==this)throw new Error(\"Parent pointer broken for key \"+this.key);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error(\"Parent pointer broken for key \"+this.key);this.right.checkInternalPointers()}},r.prototype.checkIsBST=function(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error(\"The root shouldn't have a parent\")},r.prototype.getNumberOfKeys=function(){var e;return this.hasOwnProperty(\"key\")?(e=1,this.left&&(e+=this.left.getNumberOfKeys()),this.right&&(e+=this.right.getNumberOfKeys()),e):0},r.prototype.createSimilar=function(e){return(e=e||{}).unique=this.unique,e.compareKeys=this.compareKeys,e.checkValueEquality=this.checkValueEquality,new this.constructor(e)},r.prototype.createLeftChild=function(e){var t=this.createSimilar(e);return t.parent=this,this.left=t,t},r.prototype.createRightChild=function(e){var t=this.createSimilar(e);return t.parent=this,this.right=t,t},r.prototype.insert=function(e,t){if(!this.hasOwnProperty(\"key\"))return this.key=e,void this.data.push(t);if(0!==this.compareKeys(this.key,e))0>this.compareKeys(e,this.key)?this.left?this.left.insert(e,t):this.createLeftChild({key:e,value:t}):this.right?this.right.insert(e,t):this.createRightChild({key:e,value:t});else{if(this.unique){var n=new Error(\"Can't insert key \"+e+\", it violates the unique constraint\");throw n.key=e,n.errorType=\"uniqueViolated\",n}this.data.push(t)}},r.prototype.search=function(e){return this.hasOwnProperty(\"key\")?0===this.compareKeys(this.key,e)?this.data:0>this.compareKeys(e,this.key)?this.left?this.left.search(e):[]:this.right?this.right.search(e):[]:[]},r.prototype.getLowerBoundMatcher=function(e){var t=this;return e.hasOwnProperty(\"$gt\")||e.hasOwnProperty(\"$gte\")?e.hasOwnProperty(\"$gt\")&&e.hasOwnProperty(\"$gte\")?0===t.compareKeys(e.$gte,e.$gt)?function(n){return 0<t.compareKeys(n,e.$gt)}:0<t.compareKeys(e.$gte,e.$gt)?function(n){return 0<=t.compareKeys(n,e.$gte)}:function(n){return 0<t.compareKeys(n,e.$gt)}:e.hasOwnProperty(\"$gt\")?function(n){return 0<t.compareKeys(n,e.$gt)}:function(n){return 0<=t.compareKeys(n,e.$gte)}:function(){return!0}},r.prototype.getUpperBoundMatcher=function(e){var t=this;return e.hasOwnProperty(\"$lt\")||e.hasOwnProperty(\"$lte\")?e.hasOwnProperty(\"$lt\")&&e.hasOwnProperty(\"$lte\")?0===t.compareKeys(e.$lte,e.$lt)?function(n){return 0>t.compareKeys(n,e.$lt)}:0>t.compareKeys(e.$lte,e.$lt)?function(n){return 0>=t.compareKeys(n,e.$lte)}:function(n){return 0>t.compareKeys(n,e.$lt)}:e.hasOwnProperty(\"$lt\")?function(n){return 0>t.compareKeys(n,e.$lt)}:function(n){return 0>=t.compareKeys(n,e.$lte)}:function(){return!0}},r.prototype.betweenBounds=function(e,t,n){var r=[];return this.hasOwnProperty(\"key\")?(t=t||this.getLowerBoundMatcher(e),n=n||this.getUpperBoundMatcher(e),t(this.key)&&this.left&&i(r,this.left.betweenBounds(e,t,n)),t(this.key)&&n(this.key)&&i(r,this.data),n(this.key)&&this.right&&i(r,this.right.betweenBounds(e,t,n)),r):[]},r.prototype.deleteIfLeaf=function(){return!this.left&&!this.right&&(this.parent?(this.parent.left===this?this.parent.left=null:this.parent.right=null,!0):(delete this.key,this.data=[],!0))},r.prototype.deleteIfOnlyOneChild=function(){var e;return this.left&&!this.right&&(e=this.left),!this.left&&this.right&&(e=this.right),!!e&&(this.parent?(this.parent.left===this?(this.parent.left=e,e.parent=this.parent):(this.parent.right=e,e.parent=this.parent),!0):(this.key=e.key,this.data=e.data,this.left=null,e.left&&(this.left=e.left,e.left.parent=this),this.right=null,e.right&&(this.right=e.right,e.right.parent=this),!0))},r.prototype.delete=function(e,t){var n,r=[],i=this;return this.hasOwnProperty(\"key\")?0>this.compareKeys(e,this.key)?void(this.left&&this.left.delete(e,t)):0<this.compareKeys(e,this.key)?void(this.right&&this.right.delete(e,t)):0===!this.compareKeys(e,this.key)?void 0:1<this.data.length&&void 0!==t?(this.data.forEach(function(e){i.checkValueEquality(e,t)||r.push(e)}),void(i.data=r)):void(this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(.5<=Math.random()?(n=this.left.getMaxKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.left=n.left,n.left&&(n.left.parent=n.parent)):(n.parent.right=n.left,n.left&&(n.left.parent=n.parent))):(n=this.right.getMinKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.right=n.right,n.right&&(n.right.parent=n.parent)):(n.parent.left=n.right,n.right&&(n.right.parent=n.parent))))):void 0},r.prototype.executeOnEveryNode=function(e){this.left&&this.left.executeOnEveryNode(e),e(this),this.right&&this.right.executeOnEveryNode(e)},r.prototype.prettyPrint=function(e,t){t=t||\"\",console.log(t+\"* \"+this.key),e&&console.log(t+\"* \"+this.data),(this.left||this.right)&&(this.left?this.left.prettyPrint(e,t+\"  \"):console.log(t+\"  *\"),this.right?this.right.prettyPrint(e,t+\"  \"):console.log(t+\"  *\"))},e.exports=r},function(e){e.exports.getRandomArray=function e(t){var n,r;return 0===t?[]:1===t?[0]:(n=e(t-1),r=Math.floor(Math.random()*t),n.splice(r,0,t-1),n)},e.exports.defaultCompareKeysFunction=function(e,t){if(e<t)return-1;if(e>t)return 1;if(e===t)return 0;var n=new Error(\"Couldn't compare elements\");throw n.a=e,n.b=t,n},e.exports.defaultCheckValueEquality=function(e,t){return e===t}},function(e,t,n){n(12)},function(e,t,n){var r=n(13);e.exports=r},function(e,t,n){function r(e){var t;\"string\"==typeof e?(t=e,this.inMemoryOnly=!1):(t=(e=e||{}).filename,this.inMemoryOnly=e.inMemoryOnly||!1,this.autoload=e.autoload||!1,this.timestampData=e.timestampData||!1),t&&\"string\"==typeof t&&0!==t.length?this.filename=t:(this.filename=null,this.inMemoryOnly=!0),this.compareStrings=e.compareStrings,this.persistence=new l({db:this,nodeWebkitAppName:e.nodeWebkitAppName,afterSerialization:e.afterSerialization,beforeDeserialization:e.beforeDeserialization,corruptAlertThreshold:e.corruptAlertThreshold}),this.executor=new u,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new c({fieldName:\"_id\",unique:!0}),this.ttlIndexes={},this.autoload&&this.loadDatabase(e.onload||function(e){if(e)throw e})}var i=n(6),o=n(2),a=n(5),u=n(17),c=n(8),s=n(3),f=n(1),l=n(20),h=n(24);s.inherits(r,n(25).EventEmitter),r.prototype.loadDatabase=function(){this.executor.push({this:this.persistence,fn:this.persistence.loadDatabase,arguments:arguments},!0)},r.prototype.getAllData=function(){return this.indexes._id.getAll()},r.prototype.resetIndexes=function(e){var t=this;Object.keys(this.indexes).forEach(function(n){t.indexes[n].reset(e)})},r.prototype.ensureIndex=function(e,t){var n,r=t||function(){};if(!(e=e||{}).fieldName)return(n=new Error(\"Cannot create an index without a fieldName\")).missingFieldName=!0,r(n);if(this.indexes[e.fieldName])return r(null);this.indexes[e.fieldName]=new c(e),void 0!==e.expireAfterSeconds&&(this.ttlIndexes[e.fieldName]=e.expireAfterSeconds);try{this.indexes[e.fieldName].insert(this.getAllData())}catch(n){return delete this.indexes[e.fieldName],r(n)}this.persistence.persistNewState([{$$indexCreated:e}],function(e){return r(e||null)})},r.prototype.removeIndex=function(e,t){var n=t||function(){};delete this.indexes[e],this.persistence.persistNewState([{$$indexRemoved:e}],function(e){return n(e||null)})},r.prototype.addToIndexes=function(e){var t,n,r,i=Object.keys(this.indexes);for(t=0;t<i.length;t+=1)try{this.indexes[i[t]].insert(e)}catch(i){n=t,r=i;break}if(r){for(t=0;t<n;t+=1)this.indexes[i[t]].remove(e);throw r}},r.prototype.removeFromIndexes=function(e){var t=this;Object.keys(this.indexes).forEach(function(n){t.indexes[n].remove(e)})},r.prototype.updateIndexes=function(e,t){var n,r,i,o=Object.keys(this.indexes);for(n=0;n<o.length;n+=1)try{this.indexes[o[n]].update(e,t)}catch(t){r=n,i=t;break}if(i){for(n=0;n<r;n+=1)this.indexes[o[n]].revertUpdate(e,t);throw i}},r.prototype.getCandidates=function(e,t,n){var r,i=Object.keys(this.indexes),o=this;\"function\"==typeof t&&(n=t,t=!1),a.waterfall([function(t){return r=[],Object.keys(e).forEach(function(t){(\"string\"==typeof e[t]||\"number\"==typeof e[t]||\"boolean\"==typeof e[t]||s.isDate(e[t])||null===e[t])&&r.push(t)}),0<(r=f.intersection(r,i)).length?t(null,o.indexes[r[0]].getMatching(e[r[0]])):(r=[],Object.keys(e).forEach(function(t){e[t]&&e[t].hasOwnProperty(\"$in\")&&r.push(t)}),0<(r=f.intersection(r,i)).length?t(null,o.indexes[r[0]].getMatching(e[r[0]].$in)):(r=[],Object.keys(e).forEach(function(t){e[t]&&(e[t].hasOwnProperty(\"$lt\")||e[t].hasOwnProperty(\"$lte\")||e[t].hasOwnProperty(\"$gt\")||e[t].hasOwnProperty(\"$gte\"))&&r.push(t)}),0<(r=f.intersection(r,i)).length?t(null,o.indexes[r[0]].getBetweenBounds(e[r[0]])):t(null,o.getAllData())))},function(e){if(t)return n(null,e);var r=[],i=[],u=Object.keys(o.ttlIndexes);e.forEach(function(e){var t=!0;u.forEach(function(n){void 0!==e[n]&&s.isDate(e[n])&&Date.now()>e[n].getTime()+1e3*o.ttlIndexes[n]&&(t=!1)}),t?i.push(e):r.push(e._id)}),a.eachSeries(r,function(e,t){o._remove({_id:e},{},function(e){return e?n(e):t()})},function(){return n(null,i)})}])},r.prototype._insert=function(e,t){var n,r=t||function(){};try{n=this.prepareDocumentForInsertion(e),this._insertInCache(n)}catch(t){return r(t)}this.persistence.persistNewState(s.isArray(n)?n:[n],function(e){return e?r(e):r(null,o.deepCopy(n))})},r.prototype.createNewId=function(){var e=i.uid(16);return 0<this.indexes._id.getMatching(e).length&&(e=this.createNewId()),e},r.prototype.prepareDocumentForInsertion=function(e){var t,n=this;if(s.isArray(e))t=[],e.forEach(function(e){t.push(n.prepareDocumentForInsertion(e))});else{void 0===(t=o.deepCopy(e))._id&&(t._id=this.createNewId());var r=new Date;this.timestampData&&void 0===t.createdAt&&(t.createdAt=r),this.timestampData&&void 0===t.updatedAt&&(t.updatedAt=r),o.checkObject(t)}return t},r.prototype._insertInCache=function(e){s.isArray(e)?this._insertMultipleDocsInCache(e):this.addToIndexes(e)},r.prototype._insertMultipleDocsInCache=function(e){var t,n,r;for(t=0;t<e.length;t+=1)try{this.addToIndexes(e[t])}catch(e){r=e,n=t;break}if(r){for(t=0;t<n;t+=1)this.removeFromIndexes(e[t]);throw r}},r.prototype.insert=function(){this.executor.push({this:this,fn:this._insert,arguments:arguments})},r.prototype.count=function(e,t){var n=new h(this,e,function(e,t,n){return e?n(e):n(null,t.length)});return\"function\"==typeof t?void n.exec(t):n},r.prototype.find=function(e,t,n){switch(arguments.length){case 1:t={};break;case 2:\"function\"==typeof t&&(n=t,t={})}var r=new h(this,e,function(e,t,n){var r,i=[];if(e)return n(e);for(r=0;r<t.length;r+=1)i.push(o.deepCopy(t[r]));return n(null,i)});return r.projection(t),\"function\"==typeof n?void r.exec(n):r},r.prototype.findOne=function(e,t,n){switch(arguments.length){case 1:t={};break;case 2:\"function\"==typeof t&&(n=t,t={})}var r=new h(this,e,function(e,t,n){return e?n(e):1===t.length?n(null,o.deepCopy(t[0])):n(null,null)});return r.projection(t).limit(1),\"function\"==typeof n?void r.exec(n):r},r.prototype._update=function(e,t,n,r){var i,u,c,s,l=this,p=0;\"function\"==typeof n&&(r=n,n={}),i=r||function(){},u=void 0!==n.multi&&n.multi,c=void 0!==n.upsert&&n.upsert,a.waterfall([function(n){if(!c)return n();new h(l,e).limit(1)._exec(function(r,a){if(r)return i(r);if(1===a.length)return n();var u;try{o.checkObject(t),u=t}catch(n){try{u=o.modify(o.deepCopy(e,!0),t)}catch(e){return i(e)}}return l._insert(u,function(e,t){return e?i(e):i(null,1,t,!0)})})},function(){var r,a,c=[];l.getCandidates(e,function(h,d){if(h)return i(h);try{for(s=0;s<d.length;s+=1)o.match(d[s],e)&&(u||0==p)&&(p+=1,l.timestampData&&(a=d[s].createdAt),r=o.modify(d[s],t),l.timestampData&&(r.createdAt=a,r.updatedAt=new Date),c.push({oldDoc:d[s],newDoc:r}))}catch(e){return i(e)}try{l.updateIndexes(c)}catch(e){return i(e)}var y=f.pluck(c,\"newDoc\");l.persistence.persistNewState(y,function(e){if(e)return i(e);if(!n.returnUpdatedDocs)return i(null,p);var t=[];return y.forEach(function(e){t.push(o.deepCopy(e))}),u||(t=t[0]),i(null,p,t)})})}])},r.prototype.update=function(){this.executor.push({this:this,fn:this._update,arguments:arguments})},r.prototype._remove=function(e,t,n){var r,i,a=this,u=0,c=[];\"function\"==typeof t&&(n=t,t={}),r=n||function(){},i=void 0!==t.multi&&t.multi,this.getCandidates(e,!0,function(t,n){if(t)return r(t);try{n.forEach(function(t){o.match(t,e)&&(i||0==u)&&(u+=1,c.push({$$deleted:!0,_id:t._id}),a.removeFromIndexes(t))})}catch(e){return r(e)}a.persistence.persistNewState(c,function(e){return e?r(e):r(null,u)})})},r.prototype.remove=function(){this.executor.push({this:this,fn:this._remove,arguments:arguments})},e.exports=r},function(e){e.exports=function(e){return e&&\"object\"==typeof e&&\"function\"==typeof e.copy&&\"function\"==typeof e.fill&&\"function\"==typeof e.readUInt8}},function(e){e.exports=\"function\"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e,t){!function(e){\"use strict\";function n(e){delete a[e]}function r(e){if(u)setTimeout(r,0,e);else{var t=a[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{n(e),u=!1}}}}if(!e.setImmediate){var i,o=1,a={},u=!1,c=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,\"[object process]\"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){r(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=n,t}}()?function(){var t=\"setImmediate$\"+Math.random()+\"$\",n=function(n){n.source===e&&\"string\"==typeof n.data&&0===n.data.indexOf(t)&&r(+n.data.slice(t.length))};e.addEventListener?e.addEventListener(\"message\",n,!1):e.attachEvent(\"onmessage\",n),i=function(n){e.postMessage(t+n,\"*\")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){r(e.data)},i=function(t){e.port2.postMessage(t)}}():c&&\"onreadystatechange\"in c.createElement(\"script\")?function(){var e=c.documentElement;i=function(t){var n=c.createElement(\"script\");n.onreadystatechange=function(){r(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():i=function(e){setTimeout(r,0,e)},s.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return a[o]=r,i(o),o++},s.clearImmediate=n}}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(this,n(4),n(0))},function(e,t,n){(function(t,r){function i(){this.buffer=[],this.ready=!1,this.queue=o.queue(function(e,n){for(var i=[],o=0;o<e.arguments.length;o+=1)i.push(e.arguments[o]);var a=e.arguments[e.arguments.length-1];\"function\"==typeof a?i[i.length-1]=function(){\"function\"==typeof t?t(n):r.nextTick(n),a.apply(null,arguments)}:a||0===e.arguments.length?i.push(function(){n()}):i[i.length-1]=function(){n()},e.fn.apply(e.this,i)},1)}var o=n(5);i.prototype.push=function(e,t){this.ready||t?this.queue.push(e):this.buffer.push(e)},i.prototype.processBuffer=function(){var e;for(this.ready=!0,e=0;e<this.buffer.length;e+=1)this.queue.push(this.buffer[e]);this.buffer=[]},e.exports=i}).call(this,n(7).setImmediate,n(0))},function(e,t,n){e.exports.BinarySearchTree=n(9),e.exports.AVLTree=n(19)},function(e,t,n){function r(e){this.tree=new i(e)}function i(e){e=e||{},this.left=null,this.right=null,this.parent=void 0===e.parent?null:e.parent,e.hasOwnProperty(\"key\")&&(this.key=e.key),this.data=e.hasOwnProperty(\"value\")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||u.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||u.defaultCheckValueEquality}var o=Math.max,a=n(9),u=n(10),c=n(3);n(1);c.inherits(i,a),r._AVLTree=i,i.prototype.checkHeightCorrect=function(){var e,t;if(this.hasOwnProperty(\"key\")){if(this.left&&void 0===this.left.height)throw new Error(\"Undefined height for node \"+this.left.key);if(this.right&&void 0===this.right.height)throw new Error(\"Undefined height for node \"+this.right.key);if(void 0===this.height)throw new Error(\"Undefined height for node \"+this.key);if(e=this.left?this.left.height:0,t=this.right?this.right.height:0,this.height!==1+o(e,t))throw new Error(\"Height constraint failed for node \"+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}},i.prototype.balanceFactor=function(){return(this.left?this.left.height:0)-(this.right?this.right.height:0)},i.prototype.checkBalanceFactors=function(){if(1<Math.abs(this.balanceFactor()))throw new Error(\"Tree is unbalanced at node \"+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()},i.prototype.checkIsAVLT=function(){i.super_.prototype.checkIsBST.call(this),this.checkHeightCorrect(),this.checkBalanceFactors()},r.prototype.checkIsAVLT=function(){this.tree.checkIsAVLT()},i.prototype.rightRotation=function(){var e,t,n,r,i=this,a=this.left;return a?(e=a.right,i.parent?(a.parent=i.parent,i.parent.left===i?i.parent.left=a:i.parent.right=a):a.parent=null,a.right=i,i.parent=a,i.left=e,e&&(e.parent=i),t=a.left?a.left.height:0,n=e?e.height:0,r=i.right?i.right.height:0,i.height=o(n,r)+1,a.height=o(t,i.height)+1,a):this},i.prototype.leftRotation=function(){var e,t,n,r,i=this,a=this.right;return a?(e=a.left,i.parent?(a.parent=i.parent,i.parent.left===i?i.parent.left=a:i.parent.right=a):a.parent=null,a.left=i,i.parent=a,i.right=e,e&&(e.parent=i),t=i.left?i.left.height:0,n=e?e.height:0,r=a.right?a.right.height:0,i.height=o(t,n)+1,a.height=o(r,i.height)+1,a):this},i.prototype.rightTooSmall=function(){return 1>=this.balanceFactor()?this:(0>this.left.balanceFactor()&&this.left.leftRotation(),this.rightRotation())},i.prototype.leftTooSmall=function(){return-1<=this.balanceFactor()?this:(0<this.right.balanceFactor()&&this.right.rightRotation(),this.leftRotation())},i.prototype.rebalanceAlongPath=function(e){var t,n,r=this;if(!this.hasOwnProperty(\"key\"))return delete this.height,this;for(n=e.length-1;0<=n;n-=1)e[n].height=1+o(e[n].left?e[n].left.height:0,e[n].right?e[n].right.height:0),1<e[n].balanceFactor()&&(t=e[n].rightTooSmall(),0===n&&(r=t)),-1>e[n].balanceFactor()&&(t=e[n].leftTooSmall(),0===n&&(r=t));return r},i.prototype.insert=function(e,t){var n=[],r=this;if(!this.hasOwnProperty(\"key\"))return this.key=e,this.data.push(t),this.height=1,this;for(;;){if(0===r.compareKeys(r.key,e)){if(r.unique){var i=new Error(\"Can't insert key \"+e+\", it violates the unique constraint\");throw i.key=e,i.errorType=\"uniqueViolated\",i}return r.data.push(t),this}if(n.push(r),0>r.compareKeys(e,r.key)){if(!r.left){n.push(r.createLeftChild({key:e,value:t}));break}r=r.left}else{if(!r.right){n.push(r.createRightChild({key:e,value:t}));break}r=r.right}}return this.rebalanceAlongPath(n)},r.prototype.insert=function(e,t){var n=this.tree.insert(e,t);n&&(this.tree=n)},i.prototype.delete=function(e,t){var n,r=[],i=this,o=[];if(!this.hasOwnProperty(\"key\"))return this;for(;0!==i.compareKeys(e,i.key);)if(o.push(i),0>i.compareKeys(e,i.key)){if(!i.left)return this;i=i.left}else{if(!i.right)return this;i=i.right}if(1<i.data.length&&t)return i.data.forEach(function(e){i.checkValueEquality(e,t)||r.push(e)}),i.data=r,this;if(!i.left&&!i.right)return i===this?(delete i.key,i.data=[],delete i.height,this):(i.parent.left===i?i.parent.left=null:i.parent.right=null,this.rebalanceAlongPath(o));if(!i.left||!i.right)return n=i.left?i.left:i.right,i===this?(n.parent=null,n):(i.parent.left===i?(i.parent.left=n,n.parent=i.parent):(i.parent.right=n,n.parent=i.parent),this.rebalanceAlongPath(o));if(o.push(i),!(n=i.left).right)return i.key=n.key,i.data=n.data,i.left=n.left,n.left&&(n.left.parent=i),this.rebalanceAlongPath(o);for(;n.right;)o.push(n),n=n.right;return i.key=n.key,i.data=n.data,n.parent.right=n.left,n.left&&(n.left.parent=n.parent),this.rebalanceAlongPath(o)},r.prototype.delete=function(e,t){var n=this.tree.delete(e,t);n&&(this.tree=n)},[\"getNumberOfKeys\",\"search\",\"betweenBounds\",\"prettyPrint\",\"executeOnEveryNode\"].forEach(function(e){r.prototype[e]=function(){return this.tree[e].apply(this.tree,arguments)}}),e.exports=r},function(e,t,n){(function(t){function r(e){var t,n,i;if(this.db=e.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=void 0===e.corruptAlertThreshold?.1:e.corruptAlertThreshold,!this.inMemoryOnly&&this.filename&&\"~\"===this.filename.charAt(this.filename.length-1))throw new Error(\"The datafile name can't end with a ~, which is reserved for crash safe backup files\");if(e.afterSerialization&&!e.beforeDeserialization)throw new Error(\"Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss\");if(!e.afterSerialization&&e.beforeDeserialization)throw new Error(\"Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss\");for(this.afterSerialization=e.afterSerialization||function(e){return e},this.beforeDeserialization=e.beforeDeserialization||function(e){return e},t=1;30>t;t+=1)for(n=0;10>n;n+=1)if(i=c.uid(t),this.beforeDeserialization(this.afterSerialization(i))!==i)throw new Error(\"beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start NeDB to prevent dataloss\");this.filename&&e.nodeWebkitAppName&&(console.log(\"==================================================================\"),console.log(\"WARNING: The nodeWebkitAppName option is deprecated\"),console.log(\"To get the path to the directory where Node Webkit stores the data\"),console.log(\"for your app, use the internal nw.gui module like this\"),console.log(\"require('nw.gui').App.dataPath\"),console.log(\"See https://github.com/rogerwang/node-webkit/issues/500\"),console.log(\"==================================================================\"),this.filename=r.getNWAppFilename(e.nodeWebkitAppName,this.filename))}var i=n(21),o=n(23),a=n(2),u=n(5),c=n(6),s=n(8);r.ensureDirectoryExists=function(e,t){var n=t||function(){};i.mkdirp(e,function(e){return n(e)})},r.getNWAppFilename=function(e,n){var r;switch(t.platform){case\"win32\":case\"win64\":if(!(r=t.env.LOCALAPPDATA||t.env.APPDATA))throw new Error(\"Couldn't find the base application data folder\");r=o.join(r,e);break;case\"darwin\":if(!(r=t.env.HOME))throw new Error(\"Couldn't find the base application data directory\");r=o.join(r,\"Library\",\"Application Support\",e);break;case\"linux\":if(!(r=t.env.HOME))throw new Error(\"Couldn't find the base application data directory\");r=o.join(r,\".config\",e);break;default:throw new Error(\"Can't use the Node Webkit relative path for platform \"+t.platform)}return o.join(r,\"nedb-data\",n)},r.prototype.persistCachedDatabase=function(e){var t=e||function(){},n=\"\",r=this;return this.inMemoryOnly?t(null):(this.db.getAllData().forEach(function(e){n+=r.afterSerialization(a.serialize(e))+\"\\n\"}),Object.keys(this.db.indexes).forEach(function(e){\"_id\"!=e&&(n+=r.afterSerialization(a.serialize({$$indexCreated:{fieldName:e,unique:r.db.indexes[e].unique,sparse:r.db.indexes[e].sparse}}))+\"\\n\")}),void i.crashSafeWriteFile(this.filename,n,function(e){return e?t(e):(r.db.emit(\"compaction.done\"),t(null))}))},r.prototype.compactDatafile=function(){this.db.executor.push({this:this,fn:this.persistCachedDatabase,arguments:[]})},r.prototype.setAutocompactionInterval=function(e){var t=this,n=Math.max(e||0,5e3);this.stopAutocompaction(),this.autocompactionIntervalId=setInterval(function(){t.compactDatafile()},n)},r.prototype.stopAutocompaction=function(){this.autocompactionIntervalId&&clearInterval(this.autocompactionIntervalId)},r.prototype.persistNewState=function(e,t){var n=this,r=\"\",o=t||function(){};return n.inMemoryOnly?o(null):(e.forEach(function(e){r+=n.afterSerialization(a.serialize(e))+\"\\n\"}),0===r.length?o(null):void i.appendFile(n.filename,r,\"utf8\",function(e){return o(e)}))},r.prototype.treatRawData=function(e){var t,n=e.split(\"\\n\"),r={},i=[],o={},u=-1;for(t=0;t<n.length;t+=1){var c;try{(c=a.deserialize(this.beforeDeserialization(n[t])))._id?!0===c.$$deleted?delete r[c._id]:r[c._id]=c:c.$$indexCreated&&null!=c.$$indexCreated.fieldName?o[c.$$indexCreated.fieldName]=c.$$indexCreated:\"string\"==typeof c.$$indexRemoved&&delete o[c.$$indexRemoved]}catch(t){u+=1}}if(0<n.length&&u/n.length>this.corruptAlertThreshold)throw new Error(\"More than \"+Math.floor(100*this.corruptAlertThreshold)+\"% of the data file is corrupt, the wrong beforeDeserialization hook may be used. Cautiously refusing to start NeDB to prevent dataloss\");return Object.keys(r).forEach(function(e){i.push(r[e])}),{data:i,indexes:o}},r.prototype.loadDatabase=function(e){var t=e||function(){},n=this;return n.db.resetIndexes(),n.inMemoryOnly?t(null):void u.waterfall([function(e){r.ensureDirectoryExists(o.dirname(n.filename),function(){i.ensureDatafileIntegrity(n.filename,function(){i.readFile(n.filename,\"utf8\",function(t,r){if(t)return e(t);try{var i=n.treatRawData(r)}catch(t){return e(t)}Object.keys(i.indexes).forEach(function(e){n.db.indexes[e]=new s(i.indexes[e])});try{n.db.resetIndexes(i.data)}catch(r){return n.db.resetIndexes(),e(r)}n.db.persistence.persistCachedDatabase(e)})})})}],function(e){return e?t(e):(n.db.executor.processBuffer(),t(null))})},e.exports=r}).call(this,n(0))},function(e,t,n){function r(e,t,n,r){\"function\"==typeof n&&(r=n),i.setItem(e,t,function(){return r()})}var i=n(22);i.config({name:\"NeDB\",storeName:\"nedbdata\"}),e.exports.exists=function(e,t){i.getItem(e,function(e,n){return t(null!==n)})},e.exports.rename=function(e,t,n){i.getItem(e,function(r,o){null===o?i.removeItem(t,function(){return n()}):i.setItem(t,o,function(){i.removeItem(e,function(){return n()})})})},e.exports.writeFile=r,e.exports.crashSafeWriteFile=r,e.exports.appendFile=function(e,t,n,r){\"function\"==typeof n&&(r=n),i.getItem(e,function(n,o){o=o||\"\",o+=t,i.setItem(e,o,function(){return r()})})},e.exports.readFile=function(e,t,n){\"function\"==typeof t&&(n=t),i.getItem(e,function(e,t){return n(null,t||\"\")})},e.exports.unlink=function(e,t){i.removeItem(e,function(){return t()})},e.exports.mkdirp=function(e,t){return t()},e.exports.ensureDatafileIntegrity=function(e,t){return t(null)}},function(e,t,n){(function(t){var n;!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(u,c){if(!r[u]){if(!t[u]){if(!c&&\"function\"==typeof n&&n)return n(u,!0);if(a)return a(u,!0);var s=new Error(\"Cannot find module '\"+u+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}var f=r[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n||e)},f,f.exports,e,t,r,i)}return r[u].exports}for(var a=\"function\"==typeof n&&n,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(e,n){(function(e){\"use strict\";function t(){s=!0;for(var e,t,n=f.length;n;){for(t=f,f=[],e=-1;++e<n;)t[e]();n=f.length}s=!1}var r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(t),u=e.document.createTextNode(\"\");a.observe(u,{characterData:!0}),r=function(){u.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r=\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")?function(){var n=e.document.createElement(\"script\");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var c=new e.MessageChannel;c.port1.onmessage=t,r=function(){c.port2.postMessage(0)}}var s,f=[];n.exports=function(e){1!==f.push(e)||s||r()}}).call(this,void 0===t?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:t)},{}],2:[function(e,t){\"use strict\";function n(){}function r(e){if(\"function\"!=typeof e)throw new TypeError(\"resolver must be a function\");this.state=p,this.queue=[],this.outcome=void 0,e!==n&&u(this,e)}function i(e,t,n){this.promise=e,\"function\"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function o(e,t,n){s(function(){var r;try{r=t(n)}catch(t){return f.reject(e,t)}r===e?f.reject(e,new TypeError(\"Cannot resolve promise with itself\")):f.resolve(e,r)})}function a(e){var t=e&&e.then;if(e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function n(t){i||(i=!0,f.reject(e,t))}function r(t){i||(i=!0,f.resolve(e,t))}var i=!1,o=c(function(){t(r,n)});\"error\"===o.status&&n(o.value)}function c(e,t){var n={};try{n.value=e(t),n.status=\"success\"}catch(t){n.status=\"error\",n.value=t}return n}var s=e(1),f={},l=[\"REJECTED\"],h=[\"FULFILLED\"],p=[\"PENDING\"];t.exports=r,r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){if(\"function\"!=typeof e&&this.state===h||\"function\"!=typeof t&&this.state===l)return this;var r=new this.constructor(n);this.state!==p?o(r,this.state===h?e:t,this.outcome):this.queue.push(new i(r,e,t));return r},i.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){f.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)},f.resolve=function(e,t){var n=c(a,t);if(\"error\"===n.status)return f.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=h,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},f.reject=function(e,t){e.state=l,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},r.resolve=function(e){return e instanceof this?e:f.resolve(new this(n),e)},r.reject=function(e){var t=new this(n);return f.reject(t,e)},r.all=function(e){function t(e,t){r.resolve(e).then(function(e){a[t]=e,++u!==i||o||(o=!0,f.resolve(s,a))},function(e){o||(o=!0,f.reject(s,e))})}var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=Array(i),u=0,c=-1,s=new this(n);++c<i;)t(e[c],c);return s},r.race=function(e){function t(e){r.resolve(e).then(function(e){o||(o=!0,f.resolve(u,e))},function(e){o||(o=!0,f.reject(u,e))})}var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=-1,u=new this(n);++a<i;)t(e[a]);return u}},{1:1}],3:[function(e){(function(t){\"use strict\";\"function\"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0===t?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:t)},{2:2}],4:[function(e,t){\"use strict\";function n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if(\"TypeError\"!==i.name)throw i;for(var n=new(\"undefined\"==typeof BlobBuilder?\"undefined\"==typeof MSBlobBuilder?\"undefined\"==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function r(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function i(e,t,n){\"function\"==typeof t&&e.then(t),\"function\"==typeof n&&e.catch(n)}function o(e){return\"string\"!=typeof e&&(console.warn(e+\" used as a key, but it is not a string.\"),e+=\"\"),e}function a(){if(arguments.length&&\"function\"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function u(e){return\"boolean\"==typeof $?S.resolve($):function(e){return new S(function(t){var r=e.transaction(D,M),i=n([\"\"]);r.objectStore(D).put(i,\"key\"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\\/(\\d+)/),n=navigator.userAgent.match(/Edge\\//);t(n||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})}(e).then(function(e){return $=e})}function c(e){var t=N[e.name],n={};n.promise=new S(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then(function(){return n.promise}):n.promise}function s(e){var t=N[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function f(e,t){var n=N[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function l(e,t){return new S(function(n,r){if(N[e.name]=N[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);c(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=j.open.apply(j,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),1>=t.oldVersion&&n.createObjectStore(D)}catch(n){if(\"ConstraintError\"!==n.name)throw n;console.warn('The database \"'+e.name+'\" has been upgraded from version '+t.oldVersion+\" to version \"+t.newVersion+', but the storage \"'+e.storeName+'\" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),s(e)}})}function h(e){return l(e,!1)}function p(e){return l(e,!0)}function d(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database \"'+e.name+\"\\\" can't be downgraded from version \"+e.db.version+\" to version \"+e.version+\".\"),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function y(e){var t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data));return n([t],{type:e.type})}function v(e){return e&&e.__local_forage_encoded_blob}function g(e){var t=this,n=t._initReady().then(function(){var e=N[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return i(n,e,e),n}function m(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(0<r&&(!e.db||\"InvalidStateError\"===i.name||\"NotFoundError\"===i.name))return S.resolve().then(function(){if(!e.db||\"NotFoundError\"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),p(e)}).then(function(){return function(e){c(e);for(var t,n=N[e.name],r=n.forages,i=0;i<r.length;i++)(t=r[i])._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null);return e.db=null,h(e).then(function(t){return e.db=t,d(e)?p(e):t}).then(function(t){e.db=n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t}).catch(function(t){throw f(e,t),t})}(e).then(function(){m(e,t,n,r-1)})}).catch(n);n(i)}}function b(e){var t,n,r,i,o,a=.75*e.length,u=e.length,c=0;\"=\"===e[e.length-1]&&(a--,\"=\"===e[e.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(t=0;t<u;t+=4)n=R.indexOf(e[t]),r=R.indexOf(e[t+1]),i=R.indexOf(e[t+2]),o=R.indexOf(e[t+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|i>>2,f[c++]=(3&i)<<6|63&o;return s}function w(e){var t,n=new Uint8Array(e),r=\"\";for(t=0;t<n.length;t+=3)r+=R[n[t]>>2],r+=R[(3&n[t])<<4|n[t+1]>>4],r+=R[(15&n[t+1])<<2|n[t+2]>>6],r+=R[63&n[t+2]];return 2==n.length%3?r=r.substring(0,r.length-1)+\"=\":1==n.length%3&&(r=r.substring(0,r.length-2)+\"==\"),r}function _(e,t,n,r){e.executeSql(\"CREATE TABLE IF NOT EXISTS \"+t.storeName+\" (id INTEGER PRIMARY KEY, key unique, value)\",[],n,r)}function k(e,t,n,r,i,o){e.executeSql(n,r,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name = ?\",[t.storeName],function(e,u){u.rows.length?o(e,a):_(e,t,function(){e.executeSql(n,r,i,o)},o)},o):o(e,a)},o)}function x(e,t){var n=e.name+\"/\";return e.storeName!==t.storeName&&(n+=e.storeName+\"/\"),n}function E(){return!function(){var e=\"_localforage_support_test\";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length}function A(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function I(){for(var e,t=1;t<arguments.length;t++)if(e=arguments[t])for(var n in e)e.hasOwnProperty(n)&&(arguments[0][n]=X(e[n])?e[n].slice():e[n]);return arguments[0]}var O=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},j=function(){try{if(\"undefined\"!=typeof indexedDB)return indexedDB;if(\"undefined\"!=typeof webkitIndexedDB)return webkitIndexedDB;if(\"undefined\"!=typeof mozIndexedDB)return mozIndexedDB;if(\"undefined\"!=typeof OIndexedDB)return OIndexedDB;if(\"undefined\"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}();\"undefined\"==typeof Promise&&e(3);var S=Promise,D=\"local-forage-detect-blob-support\",$=void 0,N={},T=Object.prototype.toString,C=\"readonly\",M=\"readwrite\",F={_driver:\"asyncStorage\",_initStorage:function(e){function t(){return S.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];var o=N[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},N[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=g);for(var a,u=[],c=0;c<o.forages.length;c++)(a=o.forages[c])!==n&&u.push(a._initReady().catch(t));var s=o.forages.slice(0);return S.all(u).then(function(){return r.db=o.db,h(r)}).then(function(e){return r.db=e,d(r,n._defaultConfig.version)?p(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t,i=0;i<s.length;i++)(t=s[i])!==n&&(t._dbInfo.db=r.db,t._dbInfo.version=r.version)})},_support:function(){try{if(!j||!j.open)return!1;var e=\"undefined\"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t=\"function\"==typeof fetch&&-1!==fetch.toString().indexOf(\"[native code\");return(!e||t)&&\"undefined\"!=typeof indexedDB&&\"undefined\"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(e,t){var n=this,i=new S(function(t,r){n.ready().then(function(){m(n._dbInfo,C,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;v(r)&&(r=y(r));var i=e(r,n.key,u++);void 0===i?n.continue():t(i)}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return r(i,t),i},getItem:function(e,t){var n=this;e=o(e);var i=new S(function(t,r){n.ready().then(function(){m(n._dbInfo,C,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),v(e)&&(e=y(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return r(i,t),i},setItem:function(e,t,n){var i=this;e=o(e);var a=new S(function(n,r){var o;i.ready().then(function(){return o=i._dbInfo,\"[object Blob]\"===T.call(t)?u(o.db).then(function(e){return e?t:function(e){return new S(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||\"\");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}(t)}):t}).then(function(t){m(i._dbInfo,M,function(o,a){if(o)return r(o);try{var u=a.objectStore(i._dbInfo.storeName);null===t&&(t=void 0);var c=u.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return r(a,n),a},removeItem:function(e,t){var n=this;e=o(e);var i=new S(function(t,r){n.ready().then(function(){m(n._dbInfo,M,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return r(i,t),i},clear:function(e){var t=this,n=new S(function(e,n){t.ready().then(function(){m(t._dbInfo,M,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return r(n,e),n},length:function(e){var t=this,n=new S(function(e,n){t.ready().then(function(){m(t._dbInfo,C,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return r(n,e),n},key:function(e,t){var n=this,i=new S(function(t,r){return 0>e?void t(null):void n.ready().then(function(){m(n._dbInfo,C,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),u=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;return n?void(0===e?t(n.key):u?t(n.key):(u=!0,n.advance(e))):void t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}})}).catch(r)});return r(i,t),i},keys:function(e){var t=this,n=new S(function(e,n){t.ready().then(function(){m(t._dbInfo,C,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;return t?(a.push(t.key),void t.continue()):void e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return r(n,e),n},dropInstance:function(e,t){t=a.apply(this,arguments);var n=this.config();(e=\"function\"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i;if(e.name){var o=e.name===n.name&&this._dbInfo.db?S.resolve(this._dbInfo.db):h(e).then(function(t){var n=N[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});i=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;c(e);var r=N[e.name],i=r.forages;t.close();for(var o,a=0;a<i.length;a++)(o=i[a])._dbInfo.db=null,o._dbInfo.version=n;return new S(function(t,r){var i=j.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t,n=0;n<i.length;n++)(t=i[n])._dbInfo.db=e,s(t._dbInfo)}).catch(function(t){throw(f(e,t)||S.resolve()).catch(function(){}),t})}}):o.then(function(t){c(e);var n=N[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new S(function(t,n){var r=j.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)s(r[t]._dbInfo)}).catch(function(t){throw(f(e,t)||S.resolve()).catch(function(){}),t})})}else i=S.reject(\"Invalid arguments\");return r(i,t),i}},R=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",P=/^~~local_forage_type~([^~]+)~/,z=\"__lfsc__:\",L=z.length,B=\"arbf\",q=\"blob\",K=\"si08\",U=\"ui08\",V=L+B.length,W=Object.prototype.toString,H={serialize:function(e,t){var n=\"\";if(e&&(n=W.call(e)),e&&(\"[object ArrayBuffer]\"===n||e.buffer&&\"[object ArrayBuffer]\"===W.call(e.buffer))){var r,i=z;e instanceof ArrayBuffer?(r=e,i+=B):(r=e.buffer,\"[object Int8Array]\"===n?i+=K:\"[object Uint8Array]\"===n?i+=U:\"[object Uint8ClampedArray]\"===n?i+=\"uic8\":\"[object Int16Array]\"===n?i+=\"si16\":\"[object Uint16Array]\"===n?i+=\"ur16\":\"[object Int32Array]\"===n?i+=\"si32\":\"[object Uint32Array]\"===n?i+=\"ui32\":\"[object Float32Array]\"===n?i+=\"fl32\":\"[object Float64Array]\"===n?i+=\"fl64\":t(new Error(\"Failed to get type for BinaryArray\"))),t(i+w(r))}else if(\"[object Blob]\"===n){var o=new FileReader;o.onload=function(){var n=\"~~local_forage_type~\"+e.type+\"~\"+w(this.result);t(z+q+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error(\"Couldn't convert value into a JSON string: \",e),t(null,r)}},deserialize:function(e){if(e.substring(0,L)!==z)return JSON.parse(e);var t,r=e.substring(V),i=e.substring(L,V);if(i===q&&P.test(r)){var o=r.match(P);t=o[1],r=r.substring(o[0].length)}var a=b(r);switch(i){case B:return a;case q:return n([a],{type:t});case K:return new Int8Array(a);case U:return new Uint8Array(a);case\"uic8\":return new Uint8ClampedArray(a);case\"si16\":return new Int16Array(a);case\"ur16\":return new Uint16Array(a);case\"si32\":return new Int32Array(a);case\"ui32\":return new Uint32Array(a);case\"fl32\":return new Float32Array(a);case\"fl64\":return new Float64Array(a);default:throw new Error(\"Unkown type: \"+i)}},stringToBuffer:b,bufferToString:w},J={_driver:\"webSQLStorage\",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=\"string\"==typeof e[r]?e[r]:e[r].toString();var i=new S(function(e,r){try{n.db=openDatabase(n.name,n.version+\"\",n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){_(i,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=H,i},_support:\"function\"==typeof openDatabase,iterate:function(e,t){var n=this,i=new S(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){k(n,i,\"SELECT * FROM \"+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,u=0;u<a;u++){var c=o.item(u),s=c.value;if(s&&(s=i.serializer.deserialize(s)),void 0!==(s=e(s,c.key,u+1)))return void t(s)}t()},function(e,t){r(t)})})}).catch(r)});return r(i,t),i},getItem:function(e,t){var n=this;e=o(e);var i=new S(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){k(n,i,\"SELECT * FROM \"+i.storeName+\" WHERE key = ? LIMIT 1\",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return r(i,t),i},setItem:function(e,t,n){return function e(t,n,i,a){var u=this;t=o(t);var c=new S(function(r,o){u.ready().then(function(){void 0===n&&(n=null);var c=n,s=u._dbInfo;s.serializer.serialize(n,function(n,f){f?o(f):s.db.transaction(function(e){k(e,s,\"INSERT OR REPLACE INTO \"+s.storeName+\" (key, value) VALUES (?, ?)\",[t,n],function(){r(c)},function(e,t){o(t)})},function(n){if(n.code===n.QUOTA_ERR){if(0<a)return void r(e.apply(u,[t,c,i,a-1]));o(n)}})})}).catch(o)});return r(c,i),c}.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=o(e);var i=new S(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){k(n,i,\"DELETE FROM \"+i.storeName+\" WHERE key = ?\",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return r(i,t),i},clear:function(e){var t=this,n=new S(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){k(t,r,\"DELETE FROM \"+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return r(n,e),n},length:function(e){var t=this,n=new S(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){k(t,r,\"SELECT COUNT(key) as c FROM \"+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return r(n,e),n},key:function(e,t){var n=this,i=new S(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){k(n,i,\"SELECT key FROM \"+i.storeName+\" WHERE id = ? LIMIT 1\",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return r(i,t),i},keys:function(e){var t=this,n=new S(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){k(t,r,\"SELECT key FROM \"+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return r(n,e),n},dropInstance:function(e,t){t=a.apply(this,arguments);var n=this.config();(e=\"function\"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,o=this;return i=e.name?new S(function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,\"\",\"\",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(function(e){return new S(function(t,n){e.transaction(function(r){r.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\",[],function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})},function(e,t){n(t)})},function(e){n(e)})})}(r))}).then(function(e){return new S(function(t,n){e.db.transaction(function(r){function i(e){return new S(function(t,n){r.executeSql(\"DROP TABLE IF EXISTS \"+e,[],function(){t()},function(e,t){n(t)})})}for(var o=[],a=0,u=e.storeNames.length;a<u;a++)o.push(i(e.storeNames[a]));S.all(o).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):S.reject(\"Invalid arguments\"),r(i,t),i}},G={_driver:\"localStorageWrapper\",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=x(e,this._defaultConfig),E()?(this._dbInfo=t,t.serializer=H,S.resolve()):S.reject()},_support:function(){try{return\"undefined\"!=typeof localStorage&&\"setItem\"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=n.ready().then(function(){for(var t,r=n._dbInfo,i=r.keyPrefix,o=i.length,a=localStorage.length,u=1,c=0;c<a;c++)if(0===(t=localStorage.key(c)).indexOf(i)){var s=localStorage.getItem(t);if(s&&(s=r.serializer.deserialize(s)),void 0!==(s=e(s,t.substring(o),u++)))return s}});return r(i,t),i},getItem:function(e,t){var n=this;e=o(e);var i=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return r(i,t),i},setItem:function(e,t,n){var i=this;e=o(e);var a=i.ready().then(function(){void 0===t&&(t=null);var n=t;return new S(function(r,o){var a=i._dbInfo;a.serializer.serialize(t,function(t,i){if(i)o(i);else try{localStorage.setItem(a.keyPrefix+e,t),r(n)}catch(t){(\"QuotaExceededError\"===t.name||\"NS_ERROR_DOM_QUOTA_REACHED\"===t.name)&&o(t),o(t)}})})});return r(a,n),a},removeItem:function(e,t){var n=this;e=o(e);var i=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return r(i,t),i},clear:function(e){var t=this,n=t.ready().then(function(){for(var e,n=t._dbInfo.keyPrefix,r=localStorage.length-1;0<=r;r--)0===(e=localStorage.key(r)).indexOf(n)&&localStorage.removeItem(e)});return r(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return r(t,e),t},key:function(e,t){var n=this,i=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return r(i,t),i},keys:function(e){var t=this,n=t.ready().then(function(){for(var e,n=t._dbInfo,r=localStorage.length,i=[],o=0;o<r;o++)0===(e=localStorage.key(o)).indexOf(n.keyPrefix)&&i.push(e.substring(n.keyPrefix.length));return i});return r(n,e),n},dropInstance:function(e,t){if(t=a.apply(this,arguments),!(e=\"function\"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i,o=this;return r(i=e.name?new S(function(t){e.storeName?t(x(e,o._defaultConfig)):t(e.name+\"/\")}).then(function(e){for(var t,n=localStorage.length-1;0<=n;n--)0===(t=localStorage.key(n)).indexOf(e)&&localStorage.removeItem(t)}):S.reject(\"Invalid arguments\"),t),i}},Y=function(e,t){return e===t||\"number\"==typeof e&&\"number\"==typeof t&&isNaN(e)&&isNaN(t)},Q=function(e,t){for(var n=e.length,r=0;r<n;){if(Y(e[r],t))return!0;r++}return!1},X=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},Z={},ee={},te={INDEXEDDB:F,WEBSQL:J,LOCALSTORAGE:G},ne=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],re=[\"dropInstance\"],ie=[\"clear\",\"getItem\",\"iterate\",\"key\",\"keys\",\"length\",\"removeItem\",\"setItem\"].concat(re),oe={description:\"\",driver:ne.slice(),name:\"localforage\",size:4980736,storeName:\"keyvaluepairs\",version:1},ae=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),te)if(te.hasOwnProperty(n)){var r=te[n],i=r._driver;this[n]=i,Z[i]||this.defineDriver(r)}this._defaultConfig=I({},oe),this._config=I({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if(\"object\"===(void 0===e?\"undefined\":O(e))){if(this._ready)return new Error(\"Can't call config() after localforage has been used.\");for(var t in e){if(\"storeName\"==t&&(e[t]=e[t].replace(/\\W/g,\"_\")),\"version\"==t&&\"number\"!=typeof e[t])return new Error(\"Database version must be a number.\");this._config[t]=e[t]}return!(\"driver\"in e&&e.driver)||this.setDriver(this._config.driver)}return\"string\"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var o=new S(function(t,n){try{var i=e._driver,o=new Error(\"Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver\");if(!e._driver)return void n(o);for(var a=ie.concat(\"_initStorage\"),u=0,c=a.length;u<c;u++){var s=a[u];if((!Q(re,s)||e[s])&&\"function\"!=typeof e[s])return void n(o)}!function(){for(var t,n=function(e){return function(){var t=new Error(\"Method \"+e+\" is not implemented by the current driver\"),n=S.reject(t);return r(n,arguments[arguments.length-1]),n}},i=0,o=re.length;i<o;i++)e[t=re[i]]||(e[t]=n(t))}();var f=function(n){Z[i]&&console.info(\"Redefining LocalForage driver: \"+i),Z[i]=e,ee[i]=n,t()};\"_support\"in e?e._support&&\"function\"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(t){n(t)}});return i(o,t,n),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Z[e]?S.resolve(Z[e]):S.reject(new Error(\"Driver not found.\"));return i(r,t,n),r},e.prototype.getSerializer=function(e){var t=S.resolve(H);return i(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return i(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){a._config.driver=a.driver()}function o(e){return a._extend(e),r(),a._ready=a._initStorage(a._config),a._ready}var a=this;X(e)||(e=[e]);var u=this._getSupportedDrivers(e),c=null===this._driverSet?S.resolve():this._driverSet.catch(function(){return S.resolve()});return this._driverSet=c.then(function(){var e=u[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then(function(e){a._driver=e._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(o).catch(n)}r();var u=new Error(\"No available storage method found.\");return a._driverSet=S.reject(u),a._driverSet}()}}(u)})}).catch(function(){r();var e=new Error(\"No available storage method found.\");return a._driverSet=S.reject(e),a._driverSet}),i(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!ee[e]},e.prototype._extend=function(e){I(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t,n=[],r=0,i=e.length;r<i;r++)t=e[r],this.supports(t)&&n.push(t);return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ie.length;e<t;e++)A(this,ie[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ae},{3:3}]},{},[4])(4)})}).call(this,n(4))},function(e,t,n){(function(e){function n(e,t){for(var n,r=0,i=e.length-1;0<=i;i--)\".\"===(n=e[i])?e.splice(i,1):\"..\"===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--);if(t)for(;r--;r)e.unshift(\"..\");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t,i=\"\",o=!1,a=arguments.length-1;-1<=a&&!o;a--){if(\"string\"!=typeof(t=0<=a?arguments[a]:e.cwd()))throw new TypeError(\"Arguments to path.resolve must be strings\");t&&(i=t+\"/\"+i,o=\"/\"===t.charAt(0))}return(o?\"/\":\"\")+(i=n(r(i.split(\"/\"),function(e){return!!e}),!o).join(\"/\"))||\".\"},t.normalize=function(e){var i=t.isAbsolute(e),o=\"/\"===a(e,-1);return(e=n(r(e.split(\"/\"),function(e){return!!e}),!i).join(\"/\"))||i||(e=\".\"),e&&o&&(e+=\"/\"),(i?\"/\":\"\")+e},t.isAbsolute=function(e){return\"/\"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e}).join(\"/\"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&\"\"===e[t];t++);for(var n=e.length-1;0<=n&&\"\"===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split(\"/\")),o=r(n.split(\"/\")),a=Math.min(i.length,o.length),u=a,c=0;c<a;c++)if(i[c]!==o[c]){u=c;break}var s=[];for(c=u;c<i.length;c++)s.push(\"..\");return(s=s.concat(o.slice(u))).join(\"/\")},t.sep=\"/\",t.delimiter=\":\",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):\".\"},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a=function(e,t,n){return e.substr(t,n)}}).call(this,n(0))},function(e,t,n){function r(e,t,n){this.db=e,this.query=t||{},n&&(this.execFn=n)}var i=n(2),o=n(1);r.prototype.limit=function(e){return this._limit=e,this},r.prototype.skip=function(e){return this._skip=e,this},r.prototype.sort=function(e){return this._sort=e,this},r.prototype.projection=function(e){return this._projection=e,this},r.prototype.project=function(e){var t,n,r,a=[],u=this;return void 0===this._projection||0===Object.keys(this._projection).length?e:(t=0!==this._projection._id,this._projection=o.omit(this._projection,\"_id\"),(r=Object.keys(this._projection)).forEach(function(e){if(null!=n&&u._projection[e]!==n)throw new Error(\"Can't both keep and omit fields except for _id\");n=u._projection[e]}),e.forEach(function(e){var o;1===n?(o={$set:{}},r.forEach(function(t){o.$set[t]=i.getDotValue(e,t),void 0===o.$set[t]&&delete o.$set[t]}),o=i.modify({},o)):(o={$unset:{}},r.forEach(function(e){o.$unset[e]=!0}),o=i.modify(e,o)),t?o._id=e._id:delete o._id,a.push(o)}),a)},r.prototype._exec=function(e){function t(t,n){return s.execFn?s.execFn(t,n,e):e(t,n)}var n,r,o,a=[],u=0,c=0,s=this,f=null;this.db.getCandidates(this.query,function(e,l){if(e)return t(e);try{for(n=0;n<l.length;n+=1)if(i.match(l[n],s.query))if(s._sort)a.push(l[n]);else if(s._skip&&s._skip>c)c+=1;else if(a.push(l[n]),u+=1,s._limit&&s._limit<=u)break}catch(e){return t(e)}if(s._sort){r=Object.keys(s._sort);var h=[];for(n=0;n<r.length;n++)o=r[n],h.push({key:o,direction:s._sort[o]});a.sort(function(e,t){var n,r,o;for(o=0;o<h.length;o++)if(0!==(r=(n=h[o]).direction*i.compareThings(i.getDotValue(e,n.key),i.getDotValue(t,n.key),s.db.compareStrings)))return r;return 0});var p=s._limit||a.length,d=s._skip||0;a=a.slice(d,d+p)}try{a=s.project(a)}catch(e){f=e,a=void 0}return t(f,a)})},r.prototype.exec=function(){this.db.executor.push({this:this,fn:this._exec,arguments:arguments})},e.exports=r},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return\"function\"==typeof e}function r(e){return\"object\"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!function(e){return\"number\"==typeof e}(e)||0>e||isNaN(e))throw TypeError(\"n must be a positive number\");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,o,a,u,c,s;if(this._events||(this._events={}),\"error\"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified \"error\" event. ('+t+\")\");throw f.context=t,f}if(i(o=this._events[e]))return!1;if(n(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),o.apply(this,u)}else if(r(o))for(u=Array.prototype.slice.call(arguments,1),a=(s=o.slice()).length,c=0;c<a;c++)s[c].apply(this,u);return!0},t.prototype.addListener=function(e,o){var a;if(!n(o))throw TypeError(\"listener must be a function\");return this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",e,n(o.listener)?o.listener:o),this._events[e]?r(this._events[e])?this._events[e].push(o):this._events[e]=[this._events[e],o]:this._events[e]=o,r(this._events[e])&&!this._events[e].warned&&((a=i(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&0<a&&this._events[e].length>a&&(this._events[e].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[e].length),\"function\"==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError(\"listener must be a function\");var i=!1;return r.listener=t,this.on(e,r),this},t.prototype.removeListener=function(e,t){var i,o,a,u;if(!n(t))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[e])return this;if(a=(i=this._events[e]).length,o=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit(\"removeListener\",e,t);else if(r(i)){for(u=a;0<u--;)if(i[u]===t||i[u].listener&&i[u].listener===t){o=u;break}if(0>o)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(o,1),this._events.removeListener&&this.emit(\"removeListener\",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)\"removeListener\"!==t&&this.removeAllListeners(t);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}}]);","extractedComments":[]}